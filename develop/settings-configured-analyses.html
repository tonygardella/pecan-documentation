<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>9 Settings-configured analyses | The Predictive Ecosystem Analyzer</title>
  <meta name="description" content="9 Settings-configured analyses | The Predictive Ecosystem Analyzer">
  <meta name="generator" content="bookdown  and GitBook 2.6.7">

  <meta property="og:title" content="9 Settings-configured analyses | The Predictive Ecosystem Analyzer" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="9 Settings-configured analyses | The Predictive Ecosystem Analyzer" />
  
  
  

<meta name="author" content="By: PEcAn Team">


<meta name="date" content="2019-02-06">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="additional-web-configuration.html">
<link rel="next" href="pecan-remote.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />







<script src="libs/htmlwidgets-1.3/htmlwidgets.js"></script>
<link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="libs/datatables-binding-0.5/datatables.js"></script>
<link href="libs/dt-core-1.10.16/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core-1.10.16/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core-1.10.16/js/jquery.dataTables.min.js"></script>
<link href="libs/dt-ext-fixedcolumns-1.10.16/css/fixedColumns.dataTables.min.css" rel="stylesheet" />
<script src="libs/dt-ext-fixedcolumns-1.10.16/js/dataTables.fixedColumns.min.js"></script>
<link href="libs/crosstalk-1.0.0/css/crosstalk.css" rel="stylesheet" />
<script src="libs/crosstalk-1.0.0/js/crosstalk.min.js"></script>
<script src="libs/jszip-1.10.16/jszip.min.js"></script>
<script src="libs/pdfmake-1.10.16/pdfmake.min.js"></script>
<script src="libs/pdfmake-1.10.16/vfs_fonts.js"></script>
<link href="libs/dt-ext-buttons-1.10.16/css/buttons.dataTables.min.css" rel="stylesheet" />
<script src="libs/dt-ext-buttons-1.10.16/js/dataTables.buttons.min.js"></script>
<script src="libs/dt-ext-buttons-1.10.16/js/buttons.flash.min.js"></script>
<script src="libs/dt-ext-buttons-1.10.16/js/buttons.html5.min.js"></script>
<script src="libs/dt-ext-buttons-1.10.16/js/buttons.colVis.min.js"></script>
<script src="libs/dt-ext-buttons-1.10.16/js/buttons.print.min.js"></script>


<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; position: absolute; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; }
pre.numberSource a.sourceLine:empty
  { position: absolute; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: absolute; left: -5em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Welcome</a></li>
<li class="part"><span><b>I Introduction</b></span></li>
<li class="chapter" data-level="1" data-path="project-overview.html"><a href="project-overview.html"><i class="fa fa-check"></i><b>1</b> Project Overview</a></li>
<li class="chapter" data-level="2" data-path="contributor-covenant-code-of-conduct.html"><a href="contributor-covenant-code-of-conduct.html"><i class="fa fa-check"></i><b>2</b> Contributor Covenant Code of Conduct</a></li>
<li class="chapter" data-level="3" data-path="about-the-pecan-book.html"><a href="about-the-pecan-book.html"><i class="fa fa-check"></i><b>3</b> About the PEcAn Book</a><ul>
<li class="chapter" data-level="3.1" data-path="about-the-pecan-book.html"><a href="about-the-pecan-book.html#how-to-contribute"><i class="fa fa-check"></i><b>3.1</b> How to Contribute</a><ul>
<li class="chapter" data-level="3.1.1" data-path="about-the-pecan-book.html"><a href="about-the-pecan-book.html#editing-the-book-yourself"><i class="fa fa-check"></i><b>3.1.1</b> Editing the book yourself</a></li>
<li class="chapter" data-level="3.1.2" data-path="about-the-pecan-book.html"><a href="about-the-pecan-book.html#feedbackcommentssuggestions"><i class="fa fa-check"></i><b>3.1.2</b> Feedback/Comments/Suggestions</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>II Basic User Guide</b></span></li>
<li class="chapter" data-level="4" data-path="GettingStarted.html"><a href="GettingStarted.html"><i class="fa fa-check"></i><b>4</b> Getting Started</a><ul>
<li class="chapter" data-level="4.1" data-path="GettingStarted.html"><a href="GettingStarted.html#how-pecan-works-in-a-nutshell"><i class="fa fa-check"></i><b>4.1</b> How PEcAn Works in a nutshell</a></li>
<li class="chapter" data-level="4.2" data-path="GettingStarted.html"><a href="GettingStarted.html#installing-and-running-pecan"><i class="fa fa-check"></i><b>4.2</b> Installing and running PEcAn</a><ul>
<li class="chapter" data-level="4.2.1" data-path="GettingStarted.html"><a href="GettingStarted.html#basicvm"><i class="fa fa-check"></i><b>4.2.1</b> Using the Virtual Machine</a></li>
<li class="chapter" data-level="4.2.2" data-path="GettingStarted.html"><a href="GettingStarted.html#awsvm"><i class="fa fa-check"></i><b>4.2.2</b> Using Amazon Web Services (AWS)</a></li>
<li class="chapter" data-level="4.2.3" data-path="GettingStarted.html"><a href="GettingStarted.html#dockervm"><i class="fa fa-check"></i><b>4.2.3</b> (Experimental) Using Docker</a></li>
<li class="chapter" data-level="4.2.4" data-path="GettingStarted.html"><a href="GettingStarted.html#advanced-installing-by-hand"><i class="fa fa-check"></i><b>4.2.4</b> (Advanced) Installing by hand</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="GettingStarted.html"><a href="GettingStarted.html#pecan-demos"><i class="fa fa-check"></i><b>4.3</b> PEcAn Demos</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="web-workflow.html"><a href="web-workflow.html"><i class="fa fa-check"></i><b>5</b> Web workflow</a><ul>
<li class="chapter" data-level="5.1" data-path="web-workflow.html"><a href="web-workflow.html#web-site-model"><i class="fa fa-check"></i><b>5.1</b> Site and model selection</a><ul>
<li class="chapter" data-level="5.1.1" data-path="web-workflow.html"><a href="web-workflow.html#selecting-a-model"><i class="fa fa-check"></i><b>5.1.1</b> Selecting a model</a></li>
<li class="chapter" data-level="5.1.2" data-path="web-workflow.html"><a href="web-workflow.html#selecting-a-site"><i class="fa fa-check"></i><b>5.1.2</b> Selecting a site</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="web-workflow.html"><a href="web-workflow.html#web-model-config"><i class="fa fa-check"></i><b>5.2</b> Model configuration</a><ul>
<li class="chapter" data-level="5.2.1" data-path="web-workflow.html"><a href="web-workflow.html#choosing-meteorology"><i class="fa fa-check"></i><b>5.2.1</b> Choosing meteorology</a></li>
<li class="chapter" data-level="5.2.2" data-path="web-workflow.html"><a href="web-workflow.html#selecting-plant-functional-types-pfts-and-other-parameter-groupings."><i class="fa fa-check"></i><b>5.2.2</b> Selecting Plant Functional Types (PFTs) and other parameter groupings.</a></li>
<li class="chapter" data-level="5.2.3" data-path="web-workflow.html"><a href="web-workflow.html#choosing-initial-vegetation"><i class="fa fa-check"></i><b>5.2.3</b> Choosing initial vegetation</a></li>
<li class="chapter" data-level="5.2.4" data-path="web-workflow.html"><a href="web-workflow.html#spin-up"><i class="fa fa-check"></i><b>5.2.4</b> Spin up</a></li>
<li class="chapter" data-level="5.2.5" data-path="web-workflow.html"><a href="web-workflow.html#selecting-a-soils-product"><i class="fa fa-check"></i><b>5.2.5</b> Selecting a soils product</a></li>
<li class="chapter" data-level="5.2.6" data-path="web-workflow.html"><a href="web-workflow.html#other-model-inputs"><i class="fa fa-check"></i><b>5.2.6</b> Other model inputs</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>III Intermediate user guide</b></span></li>
<li class="chapter" data-level="6" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>6</b> Introduction</a></li>
<li class="chapter" data-level="7" data-path="pecanXML.html"><a href="pecanXML.html"><i class="fa fa-check"></i><b>7</b> The PEcAn XML</a><ul>
<li class="chapter" data-level="7.1" data-path="pecanXML.html"><a href="pecanXML.html#xml-core-config"><i class="fa fa-check"></i><b>7.1</b> Core configuration</a><ul>
<li class="chapter" data-level="7.1.1" data-path="pecanXML.html"><a href="pecanXML.html#xml-structure"><i class="fa fa-check"></i><b>7.1.1</b> Top-level structure</a></li>
<li class="chapter" data-level="7.1.2" data-path="pecanXML.html"><a href="pecanXML.html#xml-info"><i class="fa fa-check"></i><b>7.1.2</b> <code>info</code>: Run metadata</a></li>
<li class="chapter" data-level="7.1.3" data-path="pecanXML.html"><a href="pecanXML.html#xml-outdir"><i class="fa fa-check"></i><b>7.1.3</b> <code>outdir</code>: Output directory</a></li>
<li class="chapter" data-level="7.1.4" data-path="pecanXML.html"><a href="pecanXML.html#xml-database"><i class="fa fa-check"></i><b>7.1.4</b> <code>database</code>: PEcAn database settings</a></li>
<li class="chapter" data-level="7.1.5" data-path="pecanXML.html"><a href="pecanXML.html#xml-pft"><i class="fa fa-check"></i><b>7.1.5</b> <code>pft</code>: Plant functional type selection</a></li>
<li class="chapter" data-level="7.1.6" data-path="pecanXML.html"><a href="pecanXML.html#xml-meta-analysis"><i class="fa fa-check"></i><b>7.1.6</b> <code>meta.analysis</code>: Trait Meta Analysis</a></li>
<li class="chapter" data-level="7.1.7" data-path="pecanXML.html"><a href="pecanXML.html#xml-model"><i class="fa fa-check"></i><b>7.1.7</b> <code>model</code>: Model configuration</a></li>
<li class="chapter" data-level="7.1.8" data-path="pecanXML.html"><a href="pecanXML.html#xml-run"><i class="fa fa-check"></i><b>7.1.8</b> <code>run</code>: Run Setup</a></li>
<li class="chapter" data-level="7.1.9" data-path="pecanXML.html"><a href="pecanXML.html#xml-host"><i class="fa fa-check"></i><b>7.1.9</b> <code>host</code>: Host information for remote execution</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="pecanXML.html"><a href="pecanXML.html#xml-advanced"><i class="fa fa-check"></i><b>7.2</b> Advanced features</a><ul>
<li class="chapter" data-level="7.2.1" data-path="pecanXML.html"><a href="pecanXML.html#xml-ensemble"><i class="fa fa-check"></i><b>7.2.1</b> <code>ensemble</code>: Ensemble Runs</a></li>
<li class="chapter" data-level="7.2.2" data-path="pecanXML.html"><a href="pecanXML.html#xml-sensitivity-analysis"><i class="fa fa-check"></i><b>7.2.2</b> <code>sensitivity.analysis</code>: Sensitivity analysis</a></li>
<li class="chapter" data-level="7.2.3" data-path="pecanXML.html"><a href="pecanXML.html#xml-parameter-data-assimilation"><i class="fa fa-check"></i><b>7.2.3</b> Parameter Data Assimilation</a></li>
<li class="chapter" data-level="7.2.4" data-path="pecanXML.html"><a href="pecanXML.html#xml-multi-settings"><i class="fa fa-check"></i><b>7.2.4</b> Multi-Settings</a></li>
<li class="chapter" data-level="7.2.5" data-path="pecanXML.html"><a href="pecanXML.html#xml-state-data-assimilation"><i class="fa fa-check"></i><b>7.2.5</b> (experimental) State Data Assimilation</a></li>
<li class="chapter" data-level="7.2.6" data-path="pecanXML.html"><a href="pecanXML.html#xml-browndog"><i class="fa fa-check"></i><b>7.2.6</b> (experimental) Brown Dog</a></li>
<li class="chapter" data-level="7.2.7" data-path="pecanXML.html"><a href="pecanXML.html#xml-benchmarking"><i class="fa fa-check"></i><b>7.2.7</b> (experimental) Benchmarking</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="additional-web-configuration.html"><a href="additional-web-configuration.html"><i class="fa fa-check"></i><b>8</b> Additional web configuration</a><ul>
<li class="chapter" data-level="8.1" data-path="additional-web-configuration.html"><a href="additional-web-configuration.html#brown-dog"><i class="fa fa-check"></i><b>8.1</b> Brown Dog</a></li>
<li class="chapter" data-level="8.2" data-path="additional-web-configuration.html"><a href="additional-web-configuration.html#basic-setups"><i class="fa fa-check"></i><b>8.2</b> Basic Setups</a></li>
<li class="chapter" data-level="8.3" data-path="additional-web-configuration.html"><a href="additional-web-configuration.html#advanced-setup"><i class="fa fa-check"></i><b>8.3</b> Advanced Setup</a></li>
<li class="chapter" data-level="8.4" data-path="additional-web-configuration.html"><a href="additional-web-configuration.html#editing-model-configurations"><i class="fa fa-check"></i><b>8.4</b> Editing model configurations</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="settings-configured-analyses.html"><a href="settings-configured-analyses.html"><i class="fa fa-check"></i><b>9</b> Settings-configured analyses</a><ul>
<li class="chapter" data-level="9.1" data-path="settings-configured-analyses.html"><a href="settings-configured-analyses.html#pda"><i class="fa fa-check"></i><b>9.1</b> Parameter data assimilation (PDA)</a><ul>
<li class="chapter" data-level="9.1.1" data-path="settings-configured-analyses.html"><a href="settings-configured-analyses.html#pda.mcmc.r"><i class="fa fa-check"></i><b>9.1.1</b> <strong>pda.mcmc.R</strong></a></li>
<li class="chapter" data-level="9.1.2" data-path="settings-configured-analyses.html"><a href="settings-configured-analyses.html#pda.mcmc.bs.r"><i class="fa fa-check"></i><b>9.1.2</b> <strong>pda.mcmc.bs.R</strong></a></li>
<li class="chapter" data-level="9.1.3" data-path="settings-configured-analyses.html"><a href="settings-configured-analyses.html#pda.emulator"><i class="fa fa-check"></i><b>9.1.3</b> <strong>pda.emulator</strong></a></li>
<li class="chapter" data-level="9.1.4" data-path="settings-configured-analyses.html"><a href="settings-configured-analyses.html#pda.mcmc.recover.r"><i class="fa fa-check"></i><b>9.1.4</b> <strong>pda.mcmc.recover.R</strong></a></li>
<li class="chapter" data-level="9.1.5" data-path="settings-configured-analyses.html"><a href="settings-configured-analyses.html#pda.utils.r"><i class="fa fa-check"></i><b>9.1.5</b> <strong>pda.utils.R</strong></a></li>
<li class="chapter" data-level="9.1.6" data-path="settings-configured-analyses.html"><a href="settings-configured-analyses.html#get.da.data..r-plot.da.r"><i class="fa fa-check"></i><b>9.1.6</b> <strong>get.da.data.*.R, plot.da.R</strong></a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="settings-configured-analyses.html"><a href="settings-configured-analyses.html#sda"><i class="fa fa-check"></i><b>9.2</b> State data assimilation (SDA)</a><ul>
<li class="chapter" data-level="9.2.1" data-path="settings-configured-analyses.html"><a href="settings-configured-analyses.html#sda.enkf.r-description"><i class="fa fa-check"></i><b>9.2.1</b> <strong>sda.enkf.R Description</strong></a></li>
<li class="chapter" data-level="9.2.2" data-path="settings-configured-analyses.html"><a href="settings-configured-analyses.html#sda.enkf.r-arguments"><i class="fa fa-check"></i><b>9.2.2</b> <strong>sda.enkf.R Arguments</strong></a></li>
<li class="chapter" data-level="9.2.3" data-path="settings-configured-analyses.html"><a href="settings-configured-analyses.html#state-data-assimilation-workflow"><i class="fa fa-check"></i><b>9.2.3</b> State Data Assimilation Workflow</a></li>
<li class="chapter" data-level="9.2.4" data-path="settings-configured-analyses.html"><a href="settings-configured-analyses.html#state-data-assimilation-tags-example"><i class="fa fa-check"></i><b>9.2.4</b> State Data Assimilation Tags Example</a></li>
<li class="chapter" data-level="9.2.5" data-path="settings-configured-analyses.html"><a href="settings-configured-analyses.html#state-data-assimilation-tags-descriptions"><i class="fa fa-check"></i><b>9.2.5</b> State Data Assimilation Tags Descriptions</a></li>
<li class="chapter" data-level="9.2.6" data-path="settings-configured-analyses.html"><a href="settings-configured-analyses.html#model-specific-functions-for-sda-workflow"><i class="fa fa-check"></i><b>9.2.6</b> Model Specific Functions for SDA Workflow</a></li>
<li class="chapter" data-level="9.2.7" data-path="settings-configured-analyses.html"><a href="settings-configured-analyses.html#analysis-options"><i class="fa fa-check"></i><b>9.2.7</b> Analysis Options</a></li>
<li class="chapter" data-level="9.2.8" data-path="settings-configured-analyses.html"><a href="settings-configured-analyses.html#the-generalized-ensemble-filter"><i class="fa fa-check"></i><b>9.2.8</b> The Generalized Ensemble Filter</a></li>
<li class="chapter" data-level="9.2.9" data-path="settings-configured-analyses.html"><a href="settings-configured-analyses.html#multi-site-state-data-assimilation."><i class="fa fa-check"></i><b>9.2.9</b> Multi-site State data assimilation.</a></li>
<li class="chapter" data-level="9.2.10" data-path="settings-configured-analyses.html"><a href="settings-configured-analyses.html#data-products"><i class="fa fa-check"></i><b>9.2.10</b> Data Products</a></li>
<li class="chapter" data-level="9.2.11" data-path="settings-configured-analyses.html"><a href="settings-configured-analyses.html#current-models"><i class="fa fa-check"></i><b>9.2.11</b> Current Models</a></li>
<li class="chapter" data-level="9.2.12" data-path="settings-configured-analyses.html"><a href="settings-configured-analyses.html#model-calibration"><i class="fa fa-check"></i><b>9.2.12</b> Model Calibration</a></li>
<li class="chapter" data-level="9.2.13" data-path="settings-configured-analyses.html"><a href="settings-configured-analyses.html#initial-conditions"><i class="fa fa-check"></i><b>9.2.13</b> Initial Conditions</a></li>
<li class="chapter" data-level="9.2.14" data-path="settings-configured-analyses.html"><a href="settings-configured-analyses.html#drivers"><i class="fa fa-check"></i><b>9.2.14</b> Drivers</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="settings-configured-analyses.html"><a href="settings-configured-analyses.html#sequential-state-data-assimilation"><i class="fa fa-check"></i><b>9.3</b> Sequential State Data Assimilation</a><ul>
<li class="chapter" data-level="9.3.1" data-path="settings-configured-analyses.html"><a href="settings-configured-analyses.html#general-description"><i class="fa fa-check"></i><b>9.3.1</b> General Description</a></li>
<li class="chapter" data-level="9.3.2" data-path="settings-configured-analyses.html"><a href="settings-configured-analyses.html#enkf"><i class="fa fa-check"></i><b>9.3.2</b> EnKF</a></li>
<li class="chapter" data-level="9.3.3" data-path="settings-configured-analyses.html"><a href="settings-configured-analyses.html#generalized-ensemble-filter"><i class="fa fa-check"></i><b>9.3.3</b> Generalized Ensemble Filter</a></li>
<li class="chapter" data-level="9.3.4" data-path="settings-configured-analyses.html"><a href="settings-configured-analyses.html#ensemble-adjustment"><i class="fa fa-check"></i><b>9.3.4</b> Ensemble Adjustment</a></li>
<li class="chapter" data-level="9.3.5" data-path="settings-configured-analyses.html"><a href="settings-configured-analyses.html#diagnostics"><i class="fa fa-check"></i><b>9.3.5</b> Diagnostics</a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="settings-configured-analyses.html"><a href="settings-configured-analyses.html#Benchmarking"><i class="fa fa-check"></i><b>9.4</b> Benchmarking</a><ul>
<li class="chapter" data-level="9.4.1" data-path="settings-configured-analyses.html"><a href="settings-configured-analyses.html#data-preparation"><i class="fa fa-check"></i><b>9.4.1</b> Data Preparation</a></li>
<li class="chapter" data-level="9.4.2" data-path="settings-configured-analyses.html"><a href="settings-configured-analyses.html#model-runs"><i class="fa fa-check"></i><b>9.4.2</b> Model Runs</a></li>
<li class="chapter" data-level="9.4.3" data-path="settings-configured-analyses.html"><a href="settings-configured-analyses.html#the-benchmarking-shiny-app"><i class="fa fa-check"></i><b>9.4.3</b> The Benchmarking Shiny App</a></li>
<li class="chapter" data-level="9.4.4" data-path="settings-configured-analyses.html"><a href="settings-configured-analyses.html#benchmarking-in-pecan.xml"><i class="fa fa-check"></i><b>9.4.4</b> Benchmarking in pecan.xml</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="pecan-remote.html"><a href="pecan-remote.html"><i class="fa fa-check"></i><b>10</b> Remote execution with PEcAn</a><ul>
<li class="chapter" data-level="10.1" data-path="pecan-remote.html"><a href="pecan-remote.html#basics-of-ssh"><i class="fa fa-check"></i><b>10.1</b> Basics of SSH</a></li>
<li class="chapter" data-level="10.2" data-path="pecan-remote.html"><a href="pecan-remote.html#ssh-authentication-password-vs.ssh-key"><i class="fa fa-check"></i><b>10.2</b> SSH authentication – password vs. SSH key</a><ul>
<li class="chapter" data-level="10.2.1" data-path="pecan-remote.html"><a href="pecan-remote.html#ssh-tunneling"><i class="fa fa-check"></i><b>10.2.1</b> SSH tunneling</a></li>
<li class="chapter" data-level="10.2.2" data-path="pecan-remote.html"><a href="pecan-remote.html#ssh-tunnels-and-pecan"><i class="fa fa-check"></i><b>10.2.2</b> SSH tunnels and PEcAn</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="pecan-remote.html"><a href="pecan-remote.html#basic-remote-execute-functions"><i class="fa fa-check"></i><b>10.3</b> Basic remote execute functions</a></li>
<li class="chapter" data-level="10.4" data-path="pecan-remote.html"><a href="pecan-remote.html#remote-model-execution-with-pecan"><i class="fa fa-check"></i><b>10.4</b> Remote model execution with PEcAn</a><ul>
<li class="chapter" data-level="10.4.1" data-path="pecan-remote.html"><a href="pecan-remote.html#xml-configuration"><i class="fa fa-check"></i><b>10.4.1</b> XML configuration</a></li>
<li class="chapter" data-level="10.4.2" data-path="pecan-remote.html"><a href="pecan-remote.html#configuration-for-pecan-web-interface"><i class="fa fa-check"></i><b>10.4.2</b> Configuration for PEcAn web interface</a></li>
</ul></li>
<li class="chapter" data-level="10.5" data-path="pecan-remote.html"><a href="pecan-remote.html#running-pecan-code-for-remotely"><i class="fa fa-check"></i><b>10.5</b> Running PEcAn code for remotely</a><ul>
<li class="chapter" data-level="10.5.1" data-path="pecan-remote.html"><a href="pecan-remote.html#geo.bu.edu"><i class="fa fa-check"></i><b>10.5.1</b> geo.bu.edu</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="11" data-path="the-pecan-docker-api.html"><a href="the-pecan-docker-api.html"><i class="fa fa-check"></i><b>11</b> The PEcAn Docker API</a><ul>
<li class="chapter" data-level="11.1" data-path="the-pecan-docker-api.html"><a href="the-pecan-docker-api.html#installation"><i class="fa fa-check"></i><b>11.1</b> Installation</a></li>
<li class="chapter" data-level="11.2" data-path="the-pecan-docker-api.html"><a href="the-pecan-docker-api.html#creating-and-submitting-a-workflow"><i class="fa fa-check"></i><b>11.2</b> Creating and submitting a workflow</a></li>
</ul></li>
<li class="part"><span><b>IV Advanced user guide</b></span></li>
<li class="chapter" data-level="12" data-path="introduction-1.html"><a href="introduction-1.html"><i class="fa fa-check"></i><b>12</b> Introduction</a></li>
<li class="chapter" data-level="13" data-path="workflow.html"><a href="workflow.html"><i class="fa fa-check"></i><b>13</b> PEcAn workflow (web/workflow.R)</a><ul>
<li class="chapter" data-level="13.1" data-path="workflow.html"><a href="workflow.html#workflow-readsettings"><i class="fa fa-check"></i><b>13.1</b> Read Settings</a></li>
<li class="chapter" data-level="13.2" data-path="workflow.html"><a href="workflow.html#workflow-input"><i class="fa fa-check"></i><b>13.2</b> Input Conversions</a><ul>
<li class="chapter" data-level="13.2.1" data-path="workflow.html"><a href="workflow.html#workflow-input-data"><i class="fa fa-check"></i><b>13.2.1</b> Input Data</a></li>
<li class="chapter" data-level="13.2.2" data-path="workflow.html"><a href="workflow.html#workflow-input-initial"><i class="fa fa-check"></i><b>13.2.2</b> Initial Conditions</a></li>
</ul></li>
<li class="chapter" data-level="13.3" data-path="workflow.html"><a href="workflow.html#workflow-met"><i class="fa fa-check"></i><b>13.3</b> Meteorological Data</a><ul>
<li class="chapter" data-level="13.3.1" data-path="workflow.html"><a href="workflow.html#workflow-met-download"><i class="fa fa-check"></i><b>13.3.1</b> Downloading Raw data (Description of Process)</a></li>
<li class="chapter" data-level="13.3.2" data-path="workflow.html"><a href="workflow.html#workflow-met-standard"><i class="fa fa-check"></i><b>13.3.2</b> Converting raw data to PEcAn standard</a></li>
<li class="chapter" data-level="13.3.3" data-path="workflow.html"><a href="workflow.html#workflow-met-downscale"><i class="fa fa-check"></i><b>13.3.3</b> Downscaling and gapfilling (optional)</a></li>
<li class="chapter" data-level="13.3.4" data-path="workflow.html"><a href="workflow.html#workflow-met-model"><i class="fa fa-check"></i><b>13.3.4</b> Converting from PEcAn standard to model-specific format</a></li>
</ul></li>
<li class="chapter" data-level="13.4" data-path="workflow.html"><a href="workflow.html#workflow-traits"><i class="fa fa-check"></i><b>13.4</b> Traits</a></li>
<li class="chapter" data-level="13.5" data-path="workflow.html"><a href="workflow.html#workflow-metaanalysis"><i class="fa fa-check"></i><b>13.5</b> Meta Analysis</a></li>
<li class="chapter" data-level="13.6" data-path="workflow.html"><a href="workflow.html#workflow-modelconfig"><i class="fa fa-check"></i><b>13.6</b> Model Configuration</a></li>
<li class="chapter" data-level="13.7" data-path="workflow.html"><a href="workflow.html#workflow-modelrun"><i class="fa fa-check"></i><b>13.7</b> Run Execution</a></li>
<li class="chapter" data-level="13.8" data-path="workflow.html"><a href="workflow.html#workflow-postrun"><i class="fa fa-check"></i><b>13.8</b> Post Run Analysis</a></li>
<li class="chapter" data-level="13.9" data-path="workflow.html"><a href="workflow.html#workflow-advanced"><i class="fa fa-check"></i><b>13.9</b> Advanced Analysis</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="adding-to-pecan.html"><a href="adding-to-pecan.html"><i class="fa fa-check"></i><b>14</b> Adding to PEcAn</a><ul>
<li class="chapter" data-level="14.1" data-path="adding-to-pecan.html"><a href="adding-to-pecan.html#adding-model"><i class="fa fa-check"></i><b>14.1</b> Adding An Ecosystem Model</a><ul>
<li class="chapter" data-level="14.1.1" data-path="adding-to-pecan.html"><a href="adding-to-pecan.html#pecan-database"><i class="fa fa-check"></i><b>14.1.1</b> PEcAn Database</a></li>
<li class="chapter" data-level="14.1.2" data-path="adding-to-pecan.html"><a href="adding-to-pecan.html#define-model_type"><i class="fa fa-check"></i><b>14.1.2</b> Define MODEL_TYPE</a></li>
<li class="chapter" data-level="14.1.3" data-path="adding-to-pecan.html"><a href="adding-to-pecan.html#machine"><i class="fa fa-check"></i><b>14.1.3</b> MACHINE</a></li>
<li class="chapter" data-level="14.1.4" data-path="adding-to-pecan.html"><a href="adding-to-pecan.html#model"><i class="fa fa-check"></i><b>14.1.4</b> MODEL</a></li>
<li class="chapter" data-level="14.1.5" data-path="adding-to-pecan.html"><a href="adding-to-pecan.html#formats"><i class="fa fa-check"></i><b>14.1.5</b> FORMATS</a></li>
<li class="chapter" data-level="14.1.6" data-path="adding-to-pecan.html"><a href="adding-to-pecan.html#model_type---formats"><i class="fa fa-check"></i><b>14.1.6</b> MODEL_TYPE -&gt; Formats</a></li>
<li class="chapter" data-level="14.1.7" data-path="adding-to-pecan.html"><a href="adding-to-pecan.html#inputs"><i class="fa fa-check"></i><b>14.1.7</b> INPUTS</a></li>
<li class="chapter" data-level="14.1.8" data-path="adding-to-pecan.html"><a href="adding-to-pecan.html#pfts-plant-functional-types"><i class="fa fa-check"></i><b>14.1.8</b> PFTS (Plant Functional Types)</a></li>
<li class="chapter" data-level="14.1.9" data-path="adding-to-pecan.html"><a href="adding-to-pecan.html#priors"><i class="fa fa-check"></i><b>14.1.9</b> PRIORS</a></li>
<li class="chapter" data-level="14.1.10" data-path="adding-to-pecan.html"><a href="adding-to-pecan.html#interface-modules"><i class="fa fa-check"></i><b>14.1.10</b> Interface Modules</a></li>
</ul></li>
<li class="chapter" data-level="14.2" data-path="adding-to-pecan.html"><a href="adding-to-pecan.html#NewInput"><i class="fa fa-check"></i><b>14.2</b> Adding input data</a><ul>
<li class="chapter" data-level="14.2.1" data-path="adding-to-pecan.html"><a href="adding-to-pecan.html#input-records-in-bety"><i class="fa fa-check"></i><b>14.2.1</b> Input records in BETY</a></li>
<li class="chapter" data-level="14.2.2" data-path="adding-to-pecan.html"><a href="adding-to-pecan.html#create-a-database-file-record-for-the-input-data"><i class="fa fa-check"></i><b>14.2.2</b> Create a database file record for the input data</a></li>
<li class="chapter" data-level="14.2.3" data-path="adding-to-pecan.html"><a href="adding-to-pecan.html#creating-a-new-input-record-in-bety"><i class="fa fa-check"></i><b>14.2.3</b> Creating a new Input record in BETY</a></li>
<li class="chapter" data-level="14.2.4" data-path="adding-to-pecan.html"><a href="adding-to-pecan.html#InputConversions"><i class="fa fa-check"></i><b>14.2.4</b> Adding a new input converter</a></li>
</ul></li>
<li class="chapter" data-level="14.3" data-path="adding-to-pecan.html"><a href="adding-to-pecan.html#adding-data-web"><i class="fa fa-check"></i><b>14.3</b> Pecan Data Ingest via Web Interface</a><ul>
<li class="chapter" data-level="14.3.1" data-path="adding-to-pecan.html"><a href="adding-to-pecan.html#loading-data"><i class="fa fa-check"></i><b>14.3.1</b> Loading Data</a></li>
<li class="chapter" data-level="14.3.2" data-path="adding-to-pecan.html"><a href="adding-to-pecan.html#local-upload-example"><i class="fa fa-check"></i><b>14.3.2</b> Local Upload Example</a></li>
<li class="chapter" data-level="14.3.3" data-path="adding-to-pecan.html"><a href="adding-to-pecan.html#creating-a-format-record"><i class="fa fa-check"></i><b>14.3.3</b> 3. Creating a format record</a></li>
</ul></li>
<li class="chapter" data-level="14.4" data-path="adding-to-pecan.html"><a href="adding-to-pecan.html#NewFormat"><i class="fa fa-check"></i><b>14.4</b> Creating a new format</a><ul>
<li class="chapter" data-level="14.4.1" data-path="adding-to-pecan.html"><a href="adding-to-pecan.html#formats-in-bety"><i class="fa fa-check"></i><b>14.4.1</b> Formats in BETY</a></li>
<li class="chapter" data-level="14.4.2" data-path="adding-to-pecan.html"><a href="adding-to-pecan.html#creating-a-new-format-in-bety"><i class="fa fa-check"></i><b>14.4.2</b> Creating a new format in BETY</a></li>
</ul></li>
<li class="chapter" data-level="14.5" data-path="adding-to-pecan.html"><a href="adding-to-pecan.html#NewBenchmark"><i class="fa fa-check"></i><b>14.5</b> Creating a new benchmark reference run</a></li>
<li class="chapter" data-level="14.6" data-path="adding-to-pecan.html"><a href="adding-to-pecan.html#editing-records"><i class="fa fa-check"></i><b>14.6</b> Editing records</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="standalone-tools-modules.html"><a href="standalone-tools-modules.html"><i class="fa fa-check"></i><b>15</b> Standalone tools (modules)</a><ul>
<li class="chapter" data-level="15.1" data-path="standalone-tools-modules.html"><a href="standalone-tools-modules.html#LoadData"><i class="fa fa-check"></i><b>15.1</b> Loading Data in PEcAn</a><ul>
<li class="chapter" data-level="15.1.1" data-path="standalone-tools-modules.html"><a href="standalone-tools-modules.html#function-load_data"><i class="fa fa-check"></i><b>15.1.1</b> Function <code>load_data</code></a></li>
<li class="chapter" data-level="15.1.2" data-path="standalone-tools-modules.html"><a href="standalone-tools-modules.html#example"><i class="fa fa-check"></i><b>15.1.2</b> Example</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="16" data-path="working-with-the-vm.html"><a href="working-with-the-vm.html"><i class="fa fa-check"></i><b>16</b> Working with the VM</a><ul>
<li class="chapter" data-level="16.1" data-path="working-with-the-vm.html"><a href="working-with-the-vm.html#connecting-to-the-vm-via-ssh"><i class="fa fa-check"></i><b>16.1</b> Connecting to the VM via SSH</a></li>
<li class="chapter" data-level="16.2" data-path="working-with-the-vm.html"><a href="working-with-the-vm.html#connecting-to-bety-on-the-vm-via-ssh"><i class="fa fa-check"></i><b>16.2</b> Connecting to bety on the VM via SSh</a></li>
</ul></li>
<li class="chapter" data-level="17" data-path="workflow-modules.html"><a href="workflow-modules.html"><i class="fa fa-check"></i><b>17</b> Workflow modules</a><ul>
<li class="chapter" data-level="17.1" data-path="workflow-modules.html"><a href="workflow-modules.html#overview"><i class="fa fa-check"></i><b>17.1</b> Overview</a><ul>
<li class="chapter" data-level="17.1.1" data-path="workflow-modules.html"><a href="workflow-modules.html#load-settings"><i class="fa fa-check"></i><b>17.1.1</b> Load Settings:</a></li>
<li class="chapter" data-level="17.1.2" data-path="workflow-modules.html"><a href="workflow-modules.html#query-database"><i class="fa fa-check"></i><b>17.1.2</b> Query Database:</a></li>
<li class="chapter" data-level="17.1.3" data-path="workflow-modules.html"><a href="workflow-modules.html#meta-analysis"><i class="fa fa-check"></i><b>17.1.3</b> Meta Analysis:</a></li>
<li class="chapter" data-level="17.1.4" data-path="workflow-modules.html"><a href="workflow-modules.html#write-configuration-files"><i class="fa fa-check"></i><b>17.1.4</b> Write Configuration Files</a></li>
<li class="chapter" data-level="17.1.5" data-path="workflow-modules.html"><a href="workflow-modules.html#start-runs"><i class="fa fa-check"></i><b>17.1.5</b> Start Runs:</a></li>
<li class="chapter" data-level="17.1.6" data-path="workflow-modules.html"><a href="workflow-modules.html#get-model-output"><i class="fa fa-check"></i><b>17.1.6</b> Get Model Output</a></li>
<li class="chapter" data-level="17.1.7" data-path="workflow-modules.html"><a href="workflow-modules.html#ensemble-analysis"><i class="fa fa-check"></i><b>17.1.7</b> Ensemble Analysis</a></li>
<li class="chapter" data-level="17.1.8" data-path="workflow-modules.html"><a href="workflow-modules.html#sensitivity-analysis-variance-decomposition"><i class="fa fa-check"></i><b>17.1.8</b> Sensitivity Analysis, Variance Decomposition</a></li>
</ul></li>
<li class="chapter" data-level="17.2" data-path="workflow-modules.html"><a href="workflow-modules.html#glossary"><i class="fa fa-check"></i><b>17.2</b> Glossary</a></li>
</ul></li>
<li class="chapter" data-level="18" data-path="submitting-workflow-from-command-line.html"><a href="submitting-workflow-from-command-line.html"><i class="fa fa-check"></i><b>18</b> Submitting Workflow from Command Line</a></li>
<li class="chapter" data-level="19" data-path="vm-desktop-conversion.html"><a href="vm-desktop-conversion.html"><i class="fa fa-check"></i><b>19</b> VM Desktop Conversion</a><ul>
<li class="chapter" data-level="19.0.1" data-path="vm-desktop-conversion.html"><a href="vm-desktop-conversion.html#install-rstudio-desktop"><i class="fa fa-check"></i><b>19.0.1</b> Install RStudio Desktop</a></li>
</ul></li>
<li class="part"><span><b>V Developer user guide</b></span></li>
<li class="chapter" data-level="20" data-path="introduction-developer-guide.html"><a href="introduction-developer-guide.html"><i class="fa fa-check"></i><b>20</b> Introduction: Developer Guide</a></li>
<li class="chapter" data-level="21" data-path="pecan-setup.html"><a href="pecan-setup.html"><i class="fa fa-check"></i><b>21</b> PEcAn Setup</a><ul>
<li class="chapter" data-level="21.1" data-path="pecan-setup.html"><a href="pecan-setup.html#installing-the-pecan-vm"><i class="fa fa-check"></i><b>21.1</b> Installing the PEcAn VM</a></li>
<li class="chapter" data-level="21.2" data-path="pecan-setup.html"><a href="pecan-setup.html#pecan-manual-setup"><i class="fa fa-check"></i><b>21.2</b> Install PEcAn by hand</a><ul>
<li class="chapter" data-level="21.2.1" data-path="pecan-setup.html"><a href="pecan-setup.html#installation-prerequisites"><i class="fa fa-check"></i><b>21.2.1</b> Installation Prerequisites</a></li>
<li class="chapter" data-level="21.2.2" data-path="pecan-setup.html"><a href="pecan-setup.html#os-specific-installations"><i class="fa fa-check"></i><b>21.2.2</b> OS Specific Installations</a></li>
<li class="chapter" data-level="21.2.3" data-path="pecan-setup.html"><a href="pecan-setup.html#installing-bety"><i class="fa fa-check"></i><b>21.2.3</b> Installing BETY</a></li>
<li class="chapter" data-level="21.2.4" data-path="pecan-setup.html"><a href="pecan-setup.html#install-models"><i class="fa fa-check"></i><b>21.2.4</b> Install Models</a></li>
<li class="chapter" data-level="21.2.5" data-path="pecan-setup.html"><a href="pecan-setup.html#download-and-compile-pecan"><i class="fa fa-check"></i><b>21.2.5</b> Download and Compile PEcAn</a></li>
<li class="chapter" data-level="21.2.6" data-path="pecan-setup.html"><a href="pecan-setup.html#pecan-testrun"><i class="fa fa-check"></i><b>21.2.6</b> PEcAn Testrun</a></li>
<li class="chapter" data-level="21.2.7" data-path="pecan-setup.html"><a href="pecan-setup.html#pecan-customizations"><i class="fa fa-check"></i><b>21.2.7</b> PEcAn Customizations</a></li>
</ul></li>
<li class="chapter" data-level="21.3" data-path="pecan-setup.html"><a href="pecan-setup.html#aws-setup"><i class="fa fa-check"></i><b>21.3</b> AWS Setup</a><ul>
<li class="chapter" data-level="21.3.1" data-path="pecan-setup.html"><a href="pecan-setup.html#porting-vm-to-aws"><i class="fa fa-check"></i><b>21.3.1</b> Porting VM to AWS</a></li>
<li class="chapter" data-level="21.3.2" data-path="pecan-setup.html"><a href="pecan-setup.html#set-up-multiple-instances-optional"><i class="fa fa-check"></i><b>21.3.2</b> Set up multiple instances (optional)</a></li>
</ul></li>
<li class="chapter" data-level="21.4" data-path="pecan-setup.html"><a href="pecan-setup.html#shiny-setup"><i class="fa fa-check"></i><b>21.4</b> Shiny Setup</a><ul>
<li class="chapter" data-level="21.4.1" data-path="pecan-setup.html"><a href="pecan-setup.html#install-the-shiny-r-package-and-shiny-server"><i class="fa fa-check"></i><b>21.4.1</b> Install the Shiny R package and Shiny server</a></li>
<li class="chapter" data-level="21.4.2" data-path="pecan-setup.html"><a href="pecan-setup.html#modify-the-shiny-configuration-file"><i class="fa fa-check"></i><b>21.4.2</b> Modify the shiny configuration file</a></li>
<li class="chapter" data-level="21.4.3" data-path="pecan-setup.html"><a href="pecan-setup.html#set-the-apache-proxy"><i class="fa fa-check"></i><b>21.4.3</b> Set the Apache proxy</a></li>
<li class="chapter" data-level="21.4.4" data-path="pecan-setup.html"><a href="pecan-setup.html#enable-and-start-the-shiny-server-and-restart-apache"><i class="fa fa-check"></i><b>21.4.4</b> Enable and start the shiny server, and restart apache</a></li>
<li class="chapter" data-level="21.4.5" data-path="pecan-setup.html"><a href="pecan-setup.html#troubleshooting-1"><i class="fa fa-check"></i><b>21.4.5</b> Troubleshooting</a></li>
<li class="chapter" data-level="21.4.6" data-path="pecan-setup.html"><a href="pecan-setup.html#further-reading"><i class="fa fa-check"></i><b>21.4.6</b> Further reading</a></li>
</ul></li>
<li class="chapter" data-level="21.5" data-path="pecan-setup.html"><a href="pecan-setup.html#thredds-setup"><i class="fa fa-check"></i><b>21.5</b> Thredds Setup</a><ul>
<li class="chapter" data-level="21.5.1" data-path="pecan-setup.html"><a href="pecan-setup.html#install-the-tomcat-8-and-thredds-webapp"><i class="fa fa-check"></i><b>21.5.1</b> Install the Tomcat 8 and Thredds webapp</a></li>
<li class="chapter" data-level="21.5.2" data-path="pecan-setup.html"><a href="pecan-setup.html#ubuntu-1"><i class="fa fa-check"></i><b>21.5.2</b> Ubuntu</a></li>
<li class="chapter" data-level="21.5.3" data-path="pecan-setup.html"><a href="pecan-setup.html#customize-the-thredds-server"><i class="fa fa-check"></i><b>21.5.3</b> Customize the Thredds server</a></li>
<li class="chapter" data-level="21.5.4" data-path="pecan-setup.html"><a href="pecan-setup.html#update-the-catalog"><i class="fa fa-check"></i><b>21.5.4</b> Update the catalog</a></li>
<li class="chapter" data-level="21.5.5" data-path="pecan-setup.html"><a href="pecan-setup.html#troubleshooting-2"><i class="fa fa-check"></i><b>21.5.5</b> Troubleshooting</a></li>
<li class="chapter" data-level="21.5.6" data-path="pecan-setup.html"><a href="pecan-setup.html#further-reading-1"><i class="fa fa-check"></i><b>21.5.6</b> Further reading</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="22" data-path="maintaining-pecan.html"><a href="maintaining-pecan.html"><i class="fa fa-check"></i><b>22</b> Maintaining PEcAn</a><ul>
<li class="chapter" data-level="22.1" data-path="maintaining-pecan.html"><a href="maintaining-pecan.html#updating-pecan-code-and-bety-database"><i class="fa fa-check"></i><b>22.1</b> Updating PEcAn Code and Bety Database</a><ul>
<li class="chapter" data-level="22.1.1" data-path="maintaining-pecan.html"><a href="maintaining-pecan.html#updating-pecan"><i class="fa fa-check"></i><b>22.1.1</b> Updating PEcAn</a></li>
</ul></li>
<li class="chapter" data-level="22.2" data-path="maintaining-pecan.html"><a href="maintaining-pecan.html#updating-bety"><i class="fa fa-check"></i><b>22.2</b> Updating BETY</a></li>
<li class="chapter" data-level="22.3" data-path="maintaining-pecan.html"><a href="maintaining-pecan.html#database-synchronization"><i class="fa fa-check"></i><b>22.3</b> Database synchronization</a><ul>
<li class="chapter" data-level="22.3.1" data-path="maintaining-pecan.html"><a href="maintaining-pecan.html#how-does-it-work"><i class="fa fa-check"></i><b>22.3.1</b> How does it work?</a></li>
<li class="chapter" data-level="22.3.2" data-path="maintaining-pecan.html"><a href="maintaining-pecan.html#set-up"><i class="fa fa-check"></i><b>22.3.2</b> Set up</a></li>
<li class="chapter" data-level="22.3.3" data-path="maintaining-pecan.html"><a href="maintaining-pecan.html#fetch-latest-data"><i class="fa fa-check"></i><b>22.3.3</b> Fetch latest data</a></li>
<li class="chapter" data-level="22.3.4" data-path="maintaining-pecan.html"><a href="maintaining-pecan.html#sharing-data"><i class="fa fa-check"></i><b>22.3.4</b> Sharing data</a></li>
<li class="chapter" data-level="22.3.5" data-path="maintaining-pecan.html"><a href="maintaining-pecan.html#automation"><i class="fa fa-check"></i><b>22.3.5</b> Automation</a></li>
<li class="chapter" data-level="22.3.6" data-path="maintaining-pecan.html"><a href="maintaining-pecan.html#database-maintentance"><i class="fa fa-check"></i><b>22.3.6</b> Database maintentance</a></li>
<li class="chapter" data-level="22.3.7" data-path="maintaining-pecan.html"><a href="maintaining-pecan.html#troubleshooting-3"><i class="fa fa-check"></i><b>22.3.7</b> Troubleshooting</a></li>
<li class="chapter" data-level="22.3.8" data-path="maintaining-pecan.html"><a href="maintaining-pecan.html#network-status-map"><i class="fa fa-check"></i><b>22.3.8</b> Network Status Map</a></li>
<li class="chapter" data-level="22.3.9" data-path="maintaining-pecan.html"><a href="maintaining-pecan.html#tasks"><i class="fa fa-check"></i><b>22.3.9</b> Tasks</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="23" data-path="git-and-github-workflow.html"><a href="git-and-github-workflow.html"><i class="fa fa-check"></i><b>23</b> Git and GitHub Workflow</a><ul>
<li class="chapter" data-level="23.1" data-path="git-and-github-workflow.html"><a href="git-and-github-workflow.html#using-git"><i class="fa fa-check"></i><b>23.1</b> Using Git</a><ul>
<li class="chapter" data-level="23.1.1" data-path="git-and-github-workflow.html"><a href="git-and-github-workflow.html#git"><i class="fa fa-check"></i><b>23.1.1</b> Git</a></li>
<li class="chapter" data-level="23.1.2" data-path="git-and-github-workflow.html"><a href="git-and-github-workflow.html#pecan-project-and-github"><i class="fa fa-check"></i><b>23.1.2</b> PEcAn Project and Github</a></li>
<li class="chapter" data-level="23.1.3" data-path="git-and-github-workflow.html"><a href="git-and-github-workflow.html#pecan-project-branches"><i class="fa fa-check"></i><b>23.1.3</b> PEcAn Project Branches</a></li>
<li class="chapter" data-level="23.1.4" data-path="git-and-github-workflow.html"><a href="git-and-github-workflow.html#quick-and-easy"><i class="fa fa-check"></i><b>23.1.4</b> Quick and Easy</a></li>
<li class="chapter" data-level="23.1.5" data-path="git-and-github-workflow.html"><a href="git-and-github-workflow.html#recommended-git-workflow"><i class="fa fa-check"></i><b>23.1.5</b> Recommended Git Workflow</a></li>
<li class="chapter" data-level="23.1.6" data-path="git-and-github-workflow.html"><a href="git-and-github-workflow.html#before-any-work-is-done"><i class="fa fa-check"></i><b>23.1.6</b> Before any work is done</a></li>
<li class="chapter" data-level="23.1.7" data-path="git-and-github-workflow.html"><a href="git-and-github-workflow.html#during-development"><i class="fa fa-check"></i><b>23.1.7</b> During development:</a></li>
<li class="chapter" data-level="23.1.8" data-path="git-and-github-workflow.html"><a href="git-and-github-workflow.html#basic-workflow"><i class="fa fa-check"></i><b>23.1.8</b> Basic Workflow</a></li>
<li class="chapter" data-level="23.1.9" data-path="git-and-github-workflow.html"><a href="git-and-github-workflow.html#recommended-workflow-a-new-branch-for-each-change"><i class="fa fa-check"></i><b>23.1.9</b> Recommended Workflow: A new branch for each change</a></li>
<li class="chapter" data-level="23.1.10" data-path="git-and-github-workflow.html"><a href="git-and-github-workflow.html#git-rstudio"><i class="fa fa-check"></i><b>23.1.10</b> Git + Rstudio</a></li>
<li class="chapter" data-level="23.1.11" data-path="git-and-github-workflow.html"><a href="git-and-github-workflow.html#for-development"><i class="fa fa-check"></i><b>23.1.11</b> For development:</a></li>
<li class="chapter" data-level="23.1.12" data-path="git-and-github-workflow.html"><a href="git-and-github-workflow.html#references"><i class="fa fa-check"></i><b>23.1.12</b> References</a></li>
</ul></li>
<li class="chapter" data-level="23.2" data-path="git-and-github-workflow.html"><a href="git-and-github-workflow.html#github-use-with-pecan"><i class="fa fa-check"></i><b>23.2</b> GitHub use with PEcAn</a><ul>
<li class="chapter" data-level="23.2.1" data-path="git-and-github-workflow.html"><a href="git-and-github-workflow.html#bugs-issues-features-etc."><i class="fa fa-check"></i><b>23.2.1</b> Bugs, Issues, Features, etc.</a></li>
<li class="chapter" data-level="23.2.2" data-path="git-and-github-workflow.html"><a href="git-and-github-workflow.html#requesting-a-feature"><i class="fa fa-check"></i><b>23.2.2</b> Requesting a feature</a></li>
<li class="chapter" data-level="23.2.3" data-path="git-and-github-workflow.html"><a href="git-and-github-workflow.html#closing-an-issue"><i class="fa fa-check"></i><b>23.2.3</b> Closing an issue</a></li>
<li class="chapter" data-level="23.2.4" data-path="git-and-github-workflow.html"><a href="git-and-github-workflow.html#when-to-submit-an-issue"><i class="fa fa-check"></i><b>23.2.4</b> When to submit an issue?</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="24" data-path="coding-practices.html"><a href="coding-practices.html"><i class="fa fa-check"></i><b>24</b> Coding Practices</a><ul>
<li class="chapter" data-level="24.1" data-path="coding-practices.html"><a href="coding-practices.html#coding-style"><i class="fa fa-check"></i><b>24.1</b> Coding Style</a><ul>
<li class="chapter" data-level="24.1.1" data-path="coding-practices.html"><a href="coding-practices.html#use-roxygen2-documentation"><i class="fa fa-check"></i><b>24.1.1</b> Use Roxygen2 documentation</a></li>
<li class="chapter" data-level="24.1.2" data-path="coding-practices.html"><a href="coding-practices.html#write-your-name-at-the-top"><i class="fa fa-check"></i><b>24.1.2</b> Write your name at the top</a></li>
<li class="chapter" data-level="24.1.3" data-path="coding-practices.html"><a href="coding-practices.html#use-testthat-testing-package"><i class="fa fa-check"></i><b>24.1.3</b> Use testthat testing package</a></li>
<li class="chapter" data-level="24.1.4" data-path="coding-practices.html"><a href="coding-practices.html#dont-use-shortcuts"><i class="fa fa-check"></i><b>24.1.4</b> Don’t use shortcuts</a></li>
<li class="chapter" data-level="24.1.5" data-path="coding-practices.html"><a href="coding-practices.html#package-dependencies"><i class="fa fa-check"></i><b>24.1.5</b> Package Dependencies:</a></li>
</ul></li>
<li class="chapter" data-level="24.2" data-path="coding-practices.html"><a href="coding-practices.html#logging"><i class="fa fa-check"></i><b>24.2</b> Logging</a><ul>
<li class="chapter" data-level="24.2.1" data-path="coding-practices.html"><a href="coding-practices.html#pecan-logging-functions"><i class="fa fa-check"></i><b>24.2.1</b> PEcAn logging functions</a></li>
<li class="chapter" data-level="24.2.2" data-path="coding-practices.html"><a href="coding-practices.html#other-r-logging-packages"><i class="fa fa-check"></i><b>24.2.2</b> Other R logging packages</a></li>
<li class="chapter" data-level="24.2.3" data-path="coding-practices.html"><a href="coding-practices.html#example-usage"><i class="fa fa-check"></i><b>24.2.3</b> Example Usage</a></li>
</ul></li>
<li class="chapter" data-level="24.3" data-path="coding-practices.html"><a href="coding-practices.html#package-data"><i class="fa fa-check"></i><b>24.3</b> Package Data</a><ul>
<li class="chapter" data-level="24.3.1" data-path="coding-practices.html"><a href="coding-practices.html#summary"><i class="fa fa-check"></i><b>24.3.1</b> Summary:</a></li>
<li class="chapter" data-level="24.3.2" data-path="coding-practices.html"><a href="coding-practices.html#accessing-data"><i class="fa fa-check"></i><b>24.3.2</b> Accessing data</a></li>
</ul></li>
<li class="chapter" data-level="24.4" data-path="coding-practices.html"><a href="coding-practices.html#packages-used-in-development"><i class="fa fa-check"></i><b>24.4</b> Packages used in development</a></li>
<li class="chapter" data-level="24.5" data-path="coding-practices.html"><a href="coding-practices.html#roxygen2-1"><i class="fa fa-check"></i><b>24.5</b> Roxygen2</a><ul>
<li class="chapter" data-level="24.5.1" data-path="coding-practices.html"><a href="coding-practices.html#canonical-references"><i class="fa fa-check"></i><b>24.5.1</b> Canonical references:</a></li>
<li class="chapter" data-level="24.5.2" data-path="coding-practices.html"><a href="coding-practices.html#basic-roxygen2-instructions"><i class="fa fa-check"></i><b>24.5.2</b> Basic Roxygen2 instructions:</a></li>
<li class="chapter" data-level="24.5.3" data-path="coding-practices.html"><a href="coding-practices.html#example-1"><i class="fa fa-check"></i><b>24.5.3</b> Example</a></li>
<li class="chapter" data-level="24.5.4" data-path="coding-practices.html"><a href="coding-practices.html#updating-documentation"><i class="fa fa-check"></i><b>24.5.4</b> Updating documentation</a></li>
</ul></li>
<li class="chapter" data-level="24.6" data-path="coding-practices.html"><a href="coding-practices.html#testing"><i class="fa fa-check"></i><b>24.6</b> Testing</a><ul>
<li class="chapter" data-level="24.6.1" data-path="coding-practices.html"><a href="coding-practices.html#rationale"><i class="fa fa-check"></i><b>24.6.1</b> Rationale</a></li>
<li class="chapter" data-level="24.6.2" data-path="coding-practices.html"><a href="coding-practices.html#tests-makes-development-easier-and-less-error-prone"><i class="fa fa-check"></i><b>24.6.2</b> Tests makes development easier and less error prone</a></li>
<li class="chapter" data-level="24.6.3" data-path="coding-practices.html"><a href="coding-practices.html#quick-start"><i class="fa fa-check"></i><b>24.6.3</b> Quick Start:</a></li>
<li class="chapter" data-level="24.6.4" data-path="coding-practices.html"><a href="coding-practices.html#test-files"><i class="fa fa-check"></i><b>24.6.4</b> Test files</a></li>
<li class="chapter" data-level="24.6.5" data-path="coding-practices.html"><a href="coding-practices.html#testing-the-shiny-server"><i class="fa fa-check"></i><b>24.6.5</b> Testing the Shiny Server</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="25" data-path="directory-structure.html"><a href="directory-structure.html"><i class="fa fa-check"></i><b>25</b> Directory structure</a><ul>
<li class="chapter" data-level="25.1" data-path="directory-structure.html"><a href="directory-structure.html#overview-of-pecan-repository-as-of-pecan-1.5.3"><i class="fa fa-check"></i><b>25.1</b> Overview of PEcAn repository as of PEcAn 1.5.3</a></li>
<li class="chapter" data-level="25.2" data-path="directory-structure.html"><a href="directory-structure.html#generic-r-package-structure"><i class="fa fa-check"></i><b>25.2</b> Generic R package structure:</a></li>
</ul></li>
<li class="part"><span><b>VI Reference Materials</b></span></li>
<li class="chapter" data-level="26" data-path="pecan-standard-formats.html"><a href="pecan-standard-formats.html"><i class="fa fa-check"></i><b>26</b> PEcAn standard formats</a><ul>
<li class="chapter" data-level="26.1" data-path="pecan-standard-formats.html"><a href="pecan-standard-formats.html#defining-new-input-formats"><i class="fa fa-check"></i><b>26.1</b> Defining new input formats</a><ul>
<li class="chapter" data-level="26.1.1" data-path="pecan-standard-formats.html"><a href="pecan-standard-formats.html#input-standards"><i class="fa fa-check"></i><b>26.1.1</b> Input Standards</a></li>
<li class="chapter" data-level="26.1.2" data-path="pecan-standard-formats.html"><a href="pecan-standard-formats.html#output-standards"><i class="fa fa-check"></i><b>26.1.2</b> Output Standards</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="27" data-path="pecan-models.html"><a href="pecan-models.html"><i class="fa fa-check"></i><b>27</b> PEcAn Models</a><ul>
<li class="chapter" data-level="27.1" data-path="pecan-models.html"><a href="pecan-models.html#models-biocro"><i class="fa fa-check"></i><b>27.1</b> BioCro</a></li>
<li class="chapter" data-level="27.2" data-path="pecan-models.html"><a href="pecan-models.html#models-clm"><i class="fa fa-check"></i><b>27.2</b> CLM</a></li>
<li class="chapter" data-level="27.3" data-path="pecan-models.html"><a href="pecan-models.html#models-dalec"><i class="fa fa-check"></i><b>27.3</b> DALEC</a></li>
<li class="chapter" data-level="27.4" data-path="pecan-models.html"><a href="pecan-models.html#models-ed"><i class="fa fa-check"></i><b>27.4</b> ED2</a><ul>
<li class="chapter" data-level="27.4.1" data-path="pecan-models.html"><a href="pecan-models.html#introduction-2"><i class="fa fa-check"></i><b>27.4.1</b> Introduction</a></li>
<li class="chapter" data-level="27.4.2" data-path="pecan-models.html"><a href="pecan-models.html#pecan-configuration-file-additions"><i class="fa fa-check"></i><b>27.4.2</b> PEcAn configuration file additions</a></li>
<li class="chapter" data-level="27.4.3" data-path="pecan-models.html"><a href="pecan-models.html#models-ed-pft-configuration"><i class="fa fa-check"></i><b>27.4.3</b> PFT configuration in ED2</a></li>
<li class="chapter" data-level="27.4.4" data-path="pecan-models.html"><a href="pecan-models.html#model-specific-input-files"><i class="fa fa-check"></i><b>27.4.4</b> Model specific input files</a></li>
<li class="chapter" data-level="27.4.5" data-path="pecan-models.html"><a href="pecan-models.html#model-configuration-files"><i class="fa fa-check"></i><b>27.4.5</b> Model configuration files</a></li>
<li class="chapter" data-level="27.4.6" data-path="pecan-models.html"><a href="pecan-models.html#installation-notes"><i class="fa fa-check"></i><b>27.4.6</b> Installation notes</a></li>
</ul></li>
<li class="chapter" data-level="27.5" data-path="pecan-models.html"><a href="pecan-models.html#models-gday"><i class="fa fa-check"></i><b>27.5</b> GDAY</a></li>
<li class="chapter" data-level="27.6" data-path="pecan-models.html"><a href="pecan-models.html#models-linkages"><i class="fa fa-check"></i><b>27.6</b> LINKAGES</a></li>
<li class="chapter" data-level="27.7" data-path="pecan-models.html"><a href="pecan-models.html#models-lpjguess"><i class="fa fa-check"></i><b>27.7</b> LPJ-GUESS</a></li>
<li class="chapter" data-level="27.8" data-path="pecan-models.html"><a href="pecan-models.html#models-maespa"><i class="fa fa-check"></i><b>27.8</b> MAESPA</a></li>
<li class="chapter" data-level="27.9" data-path="pecan-models.html"><a href="pecan-models.html#models-preles"><i class="fa fa-check"></i><b>27.9</b> PRELES</a></li>
<li class="chapter" data-level="27.10" data-path="pecan-models.html"><a href="pecan-models.html#models-sipnet"><i class="fa fa-check"></i><b>27.10</b> SiPNET</a><ul>
<li class="chapter" data-level="27.10.1" data-path="pecan-models.html"><a href="pecan-models.html#download-gfdl"><i class="fa fa-check"></i><b>27.10.1</b> Download GFDL</a></li>
<li class="chapter" data-level="27.10.2" data-path="pecan-models.html"><a href="pecan-models.html#cm3"><i class="fa fa-check"></i><b>27.10.2</b> CM3</a></li>
<li class="chapter" data-level="27.10.3" data-path="pecan-models.html"><a href="pecan-models.html#esm2m-esm2g"><i class="fa fa-check"></i><b>27.10.3</b> ESM2M &amp; ESM2G</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="28" data-path="available-meteorological-drivers.html"><a href="available-meteorological-drivers.html"><i class="fa fa-check"></i><b>28</b> Available Meteorological Drivers</a><ul>
<li class="chapter" data-level="28.1" data-path="available-meteorological-drivers.html"><a href="available-meteorological-drivers.html#ameriflux"><i class="fa fa-check"></i><b>28.1</b> Ameriflux</a></li>
<li class="chapter" data-level="28.2" data-path="available-meteorological-drivers.html"><a href="available-meteorological-drivers.html#amerifluxlbl"><i class="fa fa-check"></i><b>28.2</b> AmerifluxLBL</a></li>
<li class="chapter" data-level="28.3" data-path="available-meteorological-drivers.html"><a href="available-meteorological-drivers.html#fluxnet2015"><i class="fa fa-check"></i><b>28.3</b> Fluxnet2015</a></li>
<li class="chapter" data-level="28.4" data-path="available-meteorological-drivers.html"><a href="available-meteorological-drivers.html#narr"><i class="fa fa-check"></i><b>28.4</b> NARR</a></li>
<li class="chapter" data-level="28.5" data-path="available-meteorological-drivers.html"><a href="available-meteorological-drivers.html#cruncep"><i class="fa fa-check"></i><b>28.5</b> CRUNCEP</a></li>
<li class="chapter" data-level="28.6" data-path="available-meteorological-drivers.html"><a href="available-meteorological-drivers.html#cmip5"><i class="fa fa-check"></i><b>28.6</b> CMIP5</a></li>
<li class="chapter" data-level="28.7" data-path="available-meteorological-drivers.html"><a href="available-meteorological-drivers.html#nldas"><i class="fa fa-check"></i><b>28.7</b> NLDAS</a></li>
<li class="chapter" data-level="28.8" data-path="available-meteorological-drivers.html"><a href="available-meteorological-drivers.html#gldas"><i class="fa fa-check"></i><b>28.8</b> GLDAS</a></li>
<li class="chapter" data-level="28.9" data-path="available-meteorological-drivers.html"><a href="available-meteorological-drivers.html#paleon"><i class="fa fa-check"></i><b>28.9</b> PalEON</a></li>
<li class="chapter" data-level="28.10" data-path="available-meteorological-drivers.html"><a href="available-meteorological-drivers.html#fluxnetlathuile"><i class="fa fa-check"></i><b>28.10</b> FluxnetLaThuile</a></li>
<li class="chapter" data-level="28.11" data-path="available-meteorological-drivers.html"><a href="available-meteorological-drivers.html#geostreams"><i class="fa fa-check"></i><b>28.11</b> Geostreams</a></li>
</ul></li>
<li class="chapter" data-level="29" data-path="docker-index.html"><a href="docker-index.html"><i class="fa fa-check"></i><b>29</b> Docker</a><ul>
<li class="chapter" data-level="29.1" data-path="docker-index.html"><a href="docker-index.html#docker-intro"><i class="fa fa-check"></i><b>29.1</b> Introduction to Docker?</a><ul>
<li class="chapter" data-level="29.1.1" data-path="docker-index.html"><a href="docker-index.html#what-is-docker"><i class="fa fa-check"></i><b>29.1.1</b> What is Docker?</a></li>
<li class="chapter" data-level="29.1.2" data-path="docker-index.html"><a href="docker-index.html#working-with-docker"><i class="fa fa-check"></i><b>29.1.2</b> Working with Docker</a></li>
<li class="chapter" data-level="29.1.3" data-path="docker-index.html"><a href="docker-index.html#docker-compose"><i class="fa fa-check"></i><b>29.1.3</b> <code>docker-compose</code></a></li>
</ul></li>
<li class="chapter" data-level="29.2" data-path="docker-index.html"><a href="docker-index.html#docker-quickstart"><i class="fa fa-check"></i><b>29.2</b> Quickstart for Docker and PEcAn</a><ul>
<li class="chapter" data-level="29.2.1" data-path="docker-index.html"><a href="docker-index.html#install-docker"><i class="fa fa-check"></i><b>29.2.1</b> Install Docker</a></li>
<li class="chapter" data-level="29.2.2" data-path="docker-index.html"><a href="docker-index.html#setup-pecan-using-docker-compose"><i class="fa fa-check"></i><b>29.2.2</b> Setup PEcAn using docker-compose</a></li>
</ul></li>
<li class="chapter" data-level="29.3" data-path="docker-index.html"><a href="docker-index.html#pecan-docker"><i class="fa fa-check"></i><b>29.3</b> PEcAn Docker Architecture</a><ul>
<li class="chapter" data-level="29.3.1" data-path="docker-index.html"><a href="docker-index.html#pecan-docker-overview"><i class="fa fa-check"></i><b>29.3.1</b> Overview</a></li>
<li class="chapter" data-level="29.3.2" data-path="docker-index.html"><a href="docker-index.html#pecan-docker-compose"><i class="fa fa-check"></i><b>29.3.2</b> PEcAn’s <code>docker-compose</code></a></li>
</ul></li>
<li class="chapter" data-level="29.4" data-path="docker-index.html"><a href="docker-index.html#model-docker"><i class="fa fa-check"></i><b>29.4</b> Models using Docker</a><ul>
<li class="chapter" data-level="29.4.1" data-path="docker-index.html"><a href="docker-index.html#model-docker-json-file"><i class="fa fa-check"></i><b>29.4.1</b> Model information</a></li>
<li class="chapter" data-level="29.4.2" data-path="docker-index.html"><a href="docker-index.html#model-docker-Dockerfile"><i class="fa fa-check"></i><b>29.4.2</b> Model build</a></li>
<li class="chapter" data-level="29.4.3" data-path="docker-index.html"><a href="docker-index.html#common-problems"><i class="fa fa-check"></i><b>29.4.3</b> Common problems</a></li>
</ul></li>
<li class="chapter" data-level="29.5" data-path="docker-index.html"><a href="docker-index.html#docker-build-images"><i class="fa fa-check"></i><b>29.5</b> Building and modifying images</a><ul>
<li class="chapter" data-level="29.5.1" data-path="docker-index.html"><a href="docker-index.html#docker-local-devel"><i class="fa fa-check"></i><b>29.5.1</b> Local development and testing with Docker</a></li>
<li class="chapter" data-level="29.5.2" data-path="docker-index.html"><a href="docker-index.html#docker-troubleshooting"><i class="fa fa-check"></i><b>29.5.2</b> Troubleshooting Docker</a></li>
</ul></li>
<li class="chapter" data-level="29.6" data-path="docker-index.html"><a href="docker-index.html#docker-migrate"><i class="fa fa-check"></i><b>29.6</b> Migrating PEcAn from VM to Docker</a><ul>
<li class="chapter" data-level="29.6.1" data-path="docker-index.html"><a href="docker-index.html#running-bety-as-a-docker-container"><i class="fa fa-check"></i><b>29.6.1</b> Running BETY as a docker container</a></li>
<li class="chapter" data-level="29.6.2" data-path="docker-index.html"><a href="docker-index.html#using-the-pecan-download.file-function"><i class="fa fa-check"></i><b>29.6.2</b> Using the PEcAn download.file() function</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="30" data-path="shiny.html"><a href="shiny.html"><i class="fa fa-check"></i><b>30</b> SHINY</a><ul>
<li class="chapter" data-level="30.0.1" data-path="shiny.html"><a href="shiny.html#debugging-shiny-apps"><i class="fa fa-check"></i><b>30.0.1</b> Debugging Shiny Apps</a></li>
</ul></li>
<li class="chapter" data-level="31" data-path="debugging.html"><a href="debugging.html"><i class="fa fa-check"></i><b>31</b> Debugging</a><ul>
<li class="chapter" data-level="31.0.1" data-path="debugging.html"><a href="debugging.html#using-testsworkflow.r"><i class="fa fa-check"></i><b>31.0.1</b> Using <code>tests/workflow.R</code></a></li>
<li class="chapter" data-level="31.0.2" data-path="debugging.html"><a href="debugging.html#useful-scripts"><i class="fa fa-check"></i><b>31.0.2</b> Useful scripts</a></li>
<li class="chapter" data-level="31.1" data-path="debugging.html"><a href="debugging.html#troubleshooting-pecan"><i class="fa fa-check"></i><b>31.1</b> Troubleshooting PEcAn</a><ul>
<li class="chapter" data-level="31.1.1" data-path="debugging.html"><a href="debugging.html#cookies-and-pecan-web-pages"><i class="fa fa-check"></i><b>31.1.1</b> Cookies and pecan web pages</a></li>
<li class="chapter" data-level="31.1.2" data-path="debugging.html"><a href="debugging.html#warning-mkdir-function.mkdir-no-such-file-or-directory"><i class="fa fa-check"></i><b>31.1.2</b> <code>Warning: mkdir() [function.mkdir]: No such file or directory</code></a></li>
<li class="chapter" data-level="31.1.3" data-path="debugging.html"><a href="debugging.html#after-creating-a-new-pft-the-tag-for-pft-not-passed-to-config.xml-in-ed"><i class="fa fa-check"></i><b>31.1.3</b> After creating a new PFT the <num> tag for PFT not passed to config.xml in ED</a></li>
</ul></li>
<li class="chapter" data-level="31.2" data-path="debugging.html"><a href="debugging.html#pecan-project-use-to-teach-ecological-model-data-synthesis"><i class="fa fa-check"></i><b>31.2</b> PEcAn Project use to teach Ecological model-data synthesis</a><ul>
<li class="chapter" data-level="31.2.1" data-path="debugging.html"><a href="debugging.html#university-classes"><i class="fa fa-check"></i><b>31.2.1</b> University classes</a></li>
<li class="chapter" data-level="31.2.2" data-path="debugging.html"><a href="debugging.html#summer-courses-workshops"><i class="fa fa-check"></i><b>31.2.2</b> Summer Courses / Workshops</a></li>
<li class="chapter" data-level="31.2.3" data-path="debugging.html"><a href="debugging.html#selected-publications"><i class="fa fa-check"></i><b>31.2.3</b> Selected Publications</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="32" data-path="rabbitmq.html"><a href="rabbitmq.html"><i class="fa fa-check"></i><b>32</b> RabbitMQ</a><ul>
<li class="chapter" data-level="32.1" data-path="rabbitmq.html"><a href="rabbitmq.html#rabbitmq-basics-sender"><i class="fa fa-check"></i><b>32.1</b> Producer – <code>sender.py</code></a></li>
<li class="chapter" data-level="32.2" data-path="rabbitmq.html"><a href="rabbitmq.html#rabbitmq-basics-receiver"><i class="fa fa-check"></i><b>32.2</b> Consumer – <code>receiver.py</code></a></li>
<li class="chapter" data-level="32.3" data-path="rabbitmq.html"><a href="rabbitmq.html#rabbitmq-web"><i class="fa fa-check"></i><b>32.3</b> RabbitMQ and the PEcAn web interface</a></li>
<li class="chapter" data-level="32.4" data-path="rabbitmq.html"><a href="rabbitmq.html#rabbitmq-xml"><i class="fa fa-check"></i><b>32.4</b> RabbitMQ in the PEcAn XML</a></li>
<li class="chapter" data-level="32.5" data-path="rabbitmq.html"><a href="rabbitmq.html#rabbitmq-dockerfile"><i class="fa fa-check"></i><b>32.5</b> RabbitMQ configuration in Dockerfiles</a></li>
<li class="chapter" data-level="32.6" data-path="rabbitmq.html"><a href="rabbitmq.html#rabbitmq-case-study"><i class="fa fa-check"></i><b>32.6</b> Case study: PEcAn web interface</a></li>
</ul></li>
<li class="chapter" data-level="33" data-path="database.html"><a href="database.html"><i class="fa fa-check"></i><b>33</b> BETY Database Administration</a><ul>
<li class="chapter" data-level="33.1" data-path="database.html"><a href="database.html#database-setup"><i class="fa fa-check"></i><b>33.1</b> Best practices</a></li>
<li class="chapter" data-level="33.2" data-path="database.html"><a href="database.html#backup-of-bety-database"><i class="fa fa-check"></i><b>33.2</b> Backup of BETY database</a></li>
<li class="chapter" data-level="33.3" data-path="database.html"><a href="database.html#restore-of-bety-database"><i class="fa fa-check"></i><b>33.3</b> Restore of BETY database</a></li>
</ul></li>
<li class="chapter" data-level="34" data-path="bookediting.html"><a href="bookediting.html"><i class="fa fa-check"></i><b>34</b> Editing this book</a></li>
<li class="chapter" data-level="35" data-path="data-assimilation-with-dart.html"><a href="data-assimilation-with-dart.html"><i class="fa fa-check"></i><b>35</b> Data assimilation with DART</a></li>
<li class="part"><span><b>VII Demos and Vignettes</b></span></li>
<li class="chapter" data-level="36" data-path="pecan-hands-on-demo-01-basic-run.html"><a href="pecan-hands-on-demo-01-basic-run.html"><i class="fa fa-check"></i><b>36</b> PEcAn Hands-On Demo 01: Basic Run</a><ul>
<li class="chapter" data-level="36.1" data-path="pecan-hands-on-demo-01-basic-run.html"><a href="pecan-hands-on-demo-01-basic-run.html#objective"><i class="fa fa-check"></i><b>36.1</b> Objective</a><ul>
<li class="chapter" data-level="36.1.1" data-path="pecan-hands-on-demo-01-basic-run.html"><a href="pecan-hands-on-demo-01-basic-run.html#pecan-url"><i class="fa fa-check"></i><b>36.1.1</b> PEcAn URL</a></li>
</ul></li>
<li class="chapter" data-level="36.2" data-path="pecan-hands-on-demo-01-basic-run.html"><a href="pecan-hands-on-demo-01-basic-run.html#basic-run"><i class="fa fa-check"></i><b>36.2</b> Basic Run</a><ul>
<li class="chapter" data-level="36.2.1" data-path="pecan-hands-on-demo-01-basic-run.html"><a href="pecan-hands-on-demo-01-basic-run.html#start-pecan-1"><i class="fa fa-check"></i><b>36.2.1</b> Start PEcAn:</a></li>
<li class="chapter" data-level="36.2.2" data-path="pecan-hands-on-demo-01-basic-run.html"><a href="pecan-hands-on-demo-01-basic-run.html#site-selection"><i class="fa fa-check"></i><b>36.2.2</b> Site Selection</a></li>
<li class="chapter" data-level="36.2.3" data-path="pecan-hands-on-demo-01-basic-run.html"><a href="pecan-hands-on-demo-01-basic-run.html#host"><i class="fa fa-check"></i><b>36.2.3</b> Host</a></li>
<li class="chapter" data-level="36.2.4" data-path="pecan-hands-on-demo-01-basic-run.html"><a href="pecan-hands-on-demo-01-basic-run.html#mode"><i class="fa fa-check"></i><b>36.2.4</b> Mode</a></li>
<li class="chapter" data-level="36.2.5" data-path="pecan-hands-on-demo-01-basic-run.html"><a href="pecan-hands-on-demo-01-basic-run.html#site-group"><i class="fa fa-check"></i><b>36.2.5</b> Site Group</a></li>
<li class="chapter" data-level="36.2.6" data-path="pecan-hands-on-demo-01-basic-run.html"><a href="pecan-hands-on-demo-01-basic-run.html#conversion"><i class="fa fa-check"></i><b>36.2.6</b> Conversion:</a></li>
<li class="chapter" data-level="36.2.7" data-path="pecan-hands-on-demo-01-basic-run.html"><a href="pecan-hands-on-demo-01-basic-run.html#site"><i class="fa fa-check"></i><b>36.2.7</b> Site:</a></li>
<li class="chapter" data-level="36.2.8" data-path="pecan-hands-on-demo-01-basic-run.html"><a href="pecan-hands-on-demo-01-basic-run.html#model-run-workflow"><i class="fa fa-check"></i><b>36.2.8</b> Model Run Workflow</a></li>
</ul></li>
<li class="chapter" data-level="36.3" data-path="pecan-hands-on-demo-01-basic-run.html"><a href="pecan-hands-on-demo-01-basic-run.html#next-steps"><i class="fa fa-check"></i><b>36.3</b> Next steps</a></li>
</ul></li>
<li class="chapter" data-level="37" data-path="demo-02-sensitivity-and-uncertainty-analysis.html"><a href="demo-02-sensitivity-and-uncertainty-analysis.html"><i class="fa fa-check"></i><b>37</b> Demo 02: Sensitivity and Uncertainty Analysis</a><ul>
<li class="chapter" data-level="37.1" data-path="demo-02-sensitivity-and-uncertainty-analysis.html"><a href="demo-02-sensitivity-and-uncertainty-analysis.html#run-specification-1"><i class="fa fa-check"></i><b>37.1</b> Run Specification</a><ul>
<li class="chapter" data-level="37.1.1" data-path="demo-02-sensitivity-and-uncertainty-analysis.html"><a href="demo-02-sensitivity-and-uncertainty-analysis.html#additional-outputs"><i class="fa fa-check"></i><b>37.1.1</b> Additional Outputs:</a></li>
<li class="chapter" data-level="37.1.2" data-path="demo-02-sensitivity-and-uncertainty-analysis.html"><a href="demo-02-sensitivity-and-uncertainty-analysis.html#run-id"><i class="fa fa-check"></i><b>37.1.2</b> 1. Run ID:</a></li>
<li class="chapter" data-level="37.1.3" data-path="demo-02-sensitivity-and-uncertainty-analysis.html"><a href="demo-02-sensitivity-and-uncertainty-analysis.html#inputs-3"><i class="fa fa-check"></i><b>37.1.3</b> 2. Inputs:</a></li>
<li class="chapter" data-level="37.1.4" data-path="demo-02-sensitivity-and-uncertainty-analysis.html"><a href="demo-02-sensitivity-and-uncertainty-analysis.html#outputs"><i class="fa fa-check"></i><b>37.1.4</b> 3. Outputs:</a></li>
<li class="chapter" data-level="37.1.5" data-path="demo-02-sensitivity-and-uncertainty-analysis.html"><a href="demo-02-sensitivity-and-uncertainty-analysis.html#pfts"><i class="fa fa-check"></i><b>37.1.5</b> 4. PFTs:</a></li>
<li class="chapter" data-level="37.1.6" data-path="demo-02-sensitivity-and-uncertainty-analysis.html"><a href="demo-02-sensitivity-and-uncertainty-analysis.html#pecan-files"><i class="fa fa-check"></i><b>37.1.6</b> PEcAn Files:</a></li>
</ul></li>
<li class="chapter" data-level="37.2" data-path="demo-02-sensitivity-and-uncertainty-analysis.html"><a href="demo-02-sensitivity-and-uncertainty-analysis.html#global-sensitivity-shiny"><i class="fa fa-check"></i><b>37.2</b> Global Sensitivity: Shiny</a><ul>
<li class="chapter" data-level="37.2.1" data-path="demo-02-sensitivity-and-uncertainty-analysis.html"><a href="demo-02-sensitivity-and-uncertainty-analysis.html#next-steps-1"><i class="fa fa-check"></i><b>37.2.1</b> Next Steps</a></li>
<li class="chapter" data-level="37.2.2" data-path="demo-02-sensitivity-and-uncertainty-analysis.html"><a href="demo-02-sensitivity-and-uncertainty-analysis.html#assimilation-by-hand"><i class="fa fa-check"></i><b>37.2.2</b> Assimilation ‘by hand’</a></li>
<li class="chapter" data-level="37.2.3" data-path="demo-02-sensitivity-and-uncertainty-analysis.html"><a href="demo-02-sensitivity-and-uncertainty-analysis.html#mcmc-concepts"><i class="fa fa-check"></i><b>37.2.3</b> MCMC Concepts</a></li>
<li class="chapter" data-level="37.2.4" data-path="demo-02-sensitivity-and-uncertainty-analysis.html"><a href="demo-02-sensitivity-and-uncertainty-analysis.html#more-info-about-tools-analyses-and-specific-tasks"><i class="fa fa-check"></i><b>37.2.4</b> More info about tools, analyses, and specific tasks…</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="38" data-path="pecan-testing-the-sensitivity-analysis-against-observations.html"><a href="pecan-testing-the-sensitivity-analysis-against-observations.html"><i class="fa fa-check"></i><b>38</b> PEcAn: Testing the Sensitivity Analysis Against Observations&quot;</a><ul>
<li class="chapter" data-level="38.0.1" data-path="pecan-testing-the-sensitivity-analysis-against-observations.html"><a href="pecan-testing-the-sensitivity-analysis-against-observations.html#author-ankur-desai"><i class="fa fa-check"></i><b>38.0.1</b> Author: “Ankur Desai”</a></li>
<li class="chapter" data-level="38.1" data-path="pecan-testing-the-sensitivity-analysis-against-observations.html"><a href="pecan-testing-the-sensitivity-analysis-against-observations.html#introduction-3"><i class="fa fa-check"></i><b>38.1</b> Introduction</a></li>
</ul></li>
<li class="chapter" data-level="39" data-path="simple-model-data-comparisons.html"><a href="simple-model-data-comparisons.html"><i class="fa fa-check"></i><b>39</b> Simple Model-Data Comparisons</a><ul>
<li class="chapter" data-level="39.0.1" data-path="simple-model-data-comparisons.html"><a href="simple-model-data-comparisons.html#author-istem-fer-tess-mccabe"><i class="fa fa-check"></i><b>39.0.1</b> Author: Istem Fer, Tess McCabe</a></li>
<li class="chapter" data-level="39.1" data-path="simple-model-data-comparisons.html"><a href="simple-model-data-comparisons.html#starting-rstudio-server"><i class="fa fa-check"></i><b>39.1</b> Starting RStudio Server</a></li>
<li class="chapter" data-level="39.2" data-path="simple-model-data-comparisons.html"><a href="simple-model-data-comparisons.html#read-in-settings-from-an-xml-file"><i class="fa fa-check"></i><b>39.2</b> Read in settings From an XML file</a></li>
<li class="chapter" data-level="39.3" data-path="simple-model-data-comparisons.html"><a href="simple-model-data-comparisons.html#read-in-model-output-from-specific-variables"><i class="fa fa-check"></i><b>39.3</b> Read in model output from specific variables</a></li>
<li class="chapter" data-level="39.4" data-path="simple-model-data-comparisons.html"><a href="simple-model-data-comparisons.html#compare-model-to-flux-observations"><i class="fa fa-check"></i><b>39.4</b> Compare model to flux observations</a></li>
</ul></li>
<li class="chapter" data-level="40" data-path="parameter-data-assimilation.html"><a href="parameter-data-assimilation.html"><i class="fa fa-check"></i><b>40</b> Parameter Data Assimilation</a><ul>
<li class="chapter" data-level="40.1" data-path="parameter-data-assimilation.html"><a href="parameter-data-assimilation.html#objectives"><i class="fa fa-check"></i><b>40.1</b> Objectives</a></li>
<li class="chapter" data-level="40.2" data-path="parameter-data-assimilation.html"><a href="parameter-data-assimilation.html#larger-context"><i class="fa fa-check"></i><b>40.2</b> Larger Context</a></li>
<li class="chapter" data-level="40.3" data-path="parameter-data-assimilation.html"><a href="parameter-data-assimilation.html#connect-to-rstudio"><i class="fa fa-check"></i><b>40.3</b> Connect to Rstudio</a></li>
<li class="chapter" data-level="40.4" data-path="parameter-data-assimilation.html"><a href="parameter-data-assimilation.html#defining-variables"><i class="fa fa-check"></i><b>40.4</b> Defining variables</a></li>
<li class="chapter" data-level="40.5" data-path="parameter-data-assimilation.html"><a href="parameter-data-assimilation.html#initial-ensemble-analysis"><i class="fa fa-check"></i><b>40.5</b> Initial Ensemble Analysis</a><ul>
<li class="chapter" data-level="40.5.1" data-path="parameter-data-assimilation.html"><a href="parameter-data-assimilation.html#questions"><i class="fa fa-check"></i><b>40.5.1</b> Questions:</a></li>
</ul></li>
<li class="chapter" data-level="40.6" data-path="parameter-data-assimilation.html"><a href="parameter-data-assimilation.html#choosing-parameters"><i class="fa fa-check"></i><b>40.6</b> Choosing Parameters</a><ul>
<li class="chapter" data-level="40.6.1" data-path="parameter-data-assimilation.html"><a href="parameter-data-assimilation.html#questions-1"><i class="fa fa-check"></i><b>40.6.1</b> Questions:</a></li>
</ul></li>
<li class="chapter" data-level="40.7" data-path="parameter-data-assimilation.html"><a href="parameter-data-assimilation.html#editing-pecan-settings"><i class="fa fa-check"></i><b>40.7</b> Editing PEcAn settings</a></li>
<li class="chapter" data-level="40.8" data-path="parameter-data-assimilation.html"><a href="parameter-data-assimilation.html#investigating-pecan-function-pda.emulator-optional"><i class="fa fa-check"></i><b>40.8</b> Investigating PEcAn function pda.emulator (optional)</a></li>
<li class="chapter" data-level="40.9" data-path="parameter-data-assimilation.html"><a href="parameter-data-assimilation.html#running-a-demo-pda"><i class="fa fa-check"></i><b>40.9</b> Running a demo PDA</a></li>
<li class="chapter" data-level="40.10" data-path="parameter-data-assimilation.html"><a href="parameter-data-assimilation.html#outputs-from-pecans-parameter-data-assimilation"><i class="fa fa-check"></i><b>40.10</b> Outputs from PEcAn’s Parameter Data Assimilation</a><ul>
<li class="chapter" data-level="40.10.1" data-path="parameter-data-assimilation.html"><a href="parameter-data-assimilation.html#questions-2"><i class="fa fa-check"></i><b>40.10.1</b> Questions:</a></li>
</ul></li>
<li class="chapter" data-level="40.11" data-path="parameter-data-assimilation.html"><a href="parameter-data-assimilation.html#post-pda-analyses"><i class="fa fa-check"></i><b>40.11</b> Post-PDA analyses</a><ul>
<li class="chapter" data-level="40.11.1" data-path="parameter-data-assimilation.html"><a href="parameter-data-assimilation.html#questions-3"><i class="fa fa-check"></i><b>40.11.1</b> Questions:</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="41" data-path="state-variable-data-assimilation.html"><a href="state-variable-data-assimilation.html"><i class="fa fa-check"></i><b>41</b> State-Variable Data Assimilation</a><ul>
<li class="chapter" data-level="41.1" data-path="state-variable-data-assimilation.html"><a href="state-variable-data-assimilation.html#objectives-1"><i class="fa fa-check"></i><b>41.1</b> Objectives:</a></li>
<li class="chapter" data-level="41.2" data-path="state-variable-data-assimilation.html"><a href="state-variable-data-assimilation.html#overview-1"><i class="fa fa-check"></i><b>41.2</b> Overview:</a><ul>
<li class="chapter" data-level="41.2.1" data-path="state-variable-data-assimilation.html"><a href="state-variable-data-assimilation.html#initial-run"><i class="fa fa-check"></i><b>41.2.1</b> Initial Run</a></li>
<li class="chapter" data-level="41.2.2" data-path="state-variable-data-assimilation.html"><a href="state-variable-data-assimilation.html#settings-1"><i class="fa fa-check"></i><b>41.2.2</b> Settings:</a></li>
<li class="chapter" data-level="41.2.3" data-path="state-variable-data-assimilation.html"><a href="state-variable-data-assimilation.html#loading-data-1"><i class="fa fa-check"></i><b>41.2.3</b> Loading data</a></li>
<li class="chapter" data-level="41.2.4" data-path="state-variable-data-assimilation.html"><a href="state-variable-data-assimilation.html#estimating-tree-level-data-uncertainties"><i class="fa fa-check"></i><b>41.2.4</b> Estimating tree-level data uncertainties</a></li>
</ul></li>
<li class="chapter" data-level="41.3" data-path="state-variable-data-assimilation.html"><a href="state-variable-data-assimilation.html#allometric-equations"><i class="fa fa-check"></i><b>41.3</b> Allometric equations</a></li>
<li class="chapter" data-level="41.4" data-path="state-variable-data-assimilation.html"><a href="state-variable-data-assimilation.html#estimate-stand-level-npp"><i class="fa fa-check"></i><b>41.4</b> Estimate stand-level NPP</a></li>
<li class="chapter" data-level="41.5" data-path="state-variable-data-assimilation.html"><a href="state-variable-data-assimilation.html#build-initial-conditions"><i class="fa fa-check"></i><b>41.5</b> Build Initial Conditions</a></li>
<li class="chapter" data-level="41.6" data-path="state-variable-data-assimilation.html"><a href="state-variable-data-assimilation.html#load-priors"><i class="fa fa-check"></i><b>41.6</b> Load Priors</a></li>
<li class="chapter" data-level="41.7" data-path="state-variable-data-assimilation.html"><a href="state-variable-data-assimilation.html#ensemble-kalman-filter"><i class="fa fa-check"></i><b>41.7</b> Ensemble Kalman Filter</a></li>
<li class="chapter" data-level="41.8" data-path="state-variable-data-assimilation.html"><a href="state-variable-data-assimilation.html#finishing-up"><i class="fa fa-check"></i><b>41.8</b> Finishing up</a></li>
</ul></li>
<li class="chapter" data-level="42" data-path="data-assimilation-concepts.html"><a href="data-assimilation-concepts.html"><i class="fa fa-check"></i><b>42</b> Data Assimilation Concepts&quot;</a><ul>
<li class="chapter" data-level="42.1" data-path="data-assimilation-concepts.html"><a href="data-assimilation-concepts.html#fitting-the-model"><i class="fa fa-check"></i><b>42.1</b> Fitting the model</a></li>
<li class="chapter" data-level="42.2" data-path="data-assimilation-concepts.html"><a href="data-assimilation-concepts.html#whats-going-on"><i class="fa fa-check"></i><b>42.2</b> What’s going on</a></li>
<li class="chapter" data-level="42.3" data-path="data-assimilation-concepts.html"><a href="data-assimilation-concepts.html#evaluating-the-model-output"><i class="fa fa-check"></i><b>42.3</b> Evaluating the model output</a></li>
<li class="chapter" data-level="42.4" data-path="data-assimilation-concepts.html"><a href="data-assimilation-concepts.html#additional-information"><i class="fa fa-check"></i><b>42.4</b> Additional information</a></li>
<li class="chapter" data-level="42.5" data-path="data-assimilation-concepts.html"><a href="data-assimilation-concepts.html#citations"><i class="fa fa-check"></i><b>42.5</b> Citations</a></li>
</ul></li>
<li class="chapter" data-level="43" data-path="pecanapi-vignette.html"><a href="pecanapi-vignette.html"><i class="fa fa-check"></i><b>43</b> Introduction to the PEcAn R API</a><ul>
<li class="chapter" data-level="43.1" data-path="pecanapi-vignette.html"><a href="pecanapi-vignette.html#introduction-4"><i class="fa fa-check"></i><b>43.1</b> Introduction</a></li>
<li class="chapter" data-level="43.2" data-path="pecanapi-vignette.html"><a href="pecanapi-vignette.html#pecanapi-setup"><i class="fa fa-check"></i><b>43.2</b> Initial setup</a></li>
<li class="chapter" data-level="43.3" data-path="pecanapi-vignette.html"><a href="pecanapi-vignette.html#pecanapi-workflow"><i class="fa fa-check"></i><b>43.3</b> Registering a workflow with the database</a></li>
<li class="chapter" data-level="43.4" data-path="pecanapi-vignette.html"><a href="pecanapi-vignette.html#pecanapi-settings"><i class="fa fa-check"></i><b>43.4</b> Building a settings object</a></li>
<li class="chapter" data-level="43.5" data-path="pecanapi-vignette.html"><a href="pecanapi-vignette.html#pecanapi-submit"><i class="fa fa-check"></i><b>43.5</b> Submitting a run</a></li>
<li class="chapter" data-level="43.6" data-path="pecanapi-vignette.html"><a href="pecanapi-vignette.html#pecanapi-output"><i class="fa fa-check"></i><b>43.6</b> Processing output</a></li>
</ul></li>
<li class="part"><span><b>VIII Appendix</b></span></li>
<li class="chapter" data-level="44" data-path="faq.html"><a href="faq.html"><i class="fa fa-check"></i><b>44</b> FAQ</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">The Predictive Ecosystem Analyzer</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="settings-configured-analyses" class="section level1">
<h1><span class="header-section-number">9</span> Settings-configured analyses</h1>
<p>These analyses can be run through the web interface, but lack graphical interfaces and currently can only be configured throughthe XML settings. To run these analyses use the <strong>Edit pecan.xml</strong> checkbox on the Input configuration page. Eventually, these modules will be integrated into the web user interface.</p>
<ul>
<li>Parameter Data Assimilation (PDA) {#pda}</li>
<li>State Data Assimilation (SDA) {#sda}</li>
<li>MultiSettings</li>
<li>Benchmarking</li>
</ul>
<p>(TODO: Add links)</p>
<div id="pda" class="section level2">
<h2><span class="header-section-number">9.1</span> Parameter data assimilation (PDA)</h2>
<p>All functions pertaining to Parameter Data Assimilation are housed within: <strong>pecan/modules/assim.batch</strong>.</p>
<p>For a detailed usage of the module, please see the vignette under <strong>pecan/modules/assim.batch/vignettes</strong>.</p>
<div id="pda.mcmc.r" class="section level3">
<h3><span class="header-section-number">9.1.1</span> <strong>pda.mcmc.R</strong></h3>
<p>This is the main PDA code. It performs Bayesian MCMC on model parameters by proposing parameter values, running the model, calculating a likelihood (between model output and supplied observations), and accepting or rejecting the proposed parameters (Metropolis algorithm). Additional notes:</p>
<ul>
<li><p>The first argument is <em>settings</em>, followed by others that all default to <em>NULL.settings</em> is a list used throughout Pecan, which contains all the user options for whatever analyses are being done. The easiest thing to do is just pass that whole object all around the Pecan code and let different functions access whichever settings they need. That’s what a lot of the rest of the Pecan code does. But the flexibility to override most of the relevant settings in <em>settings</em> is there by providing them directly as arguments to the function.</p></li>
<li><p>The <em>if(FALSE)…</em> : If you’re trying to step through the function you probably will have the <em>settings</em> object around, but those other variables will be undefined. If you set them all to NULL then they’ll be ignored without causing errors. It is there for debugging purposes.</p></li>
<li><p>The next step calls pda.settings(), which is in the file pda.utils.R (see below). It checks whether any settings are being overridden by arguments, and in most cases supplies default values if it can’t find either.</p></li>
<li>In the MCMC setup section
<ul>
<li>The code is set up to allow you to start a new MCMC chain, or to continue a previous chain as specified in settings.</li>
<li>The code writes a simple text file of parameter samples at every iteration, which lets you get some results and even re-start an MCMC that fails for some reason.</li>
<li>The code has adaptive jump distributions. So you can see some initialization of the jump distributions and associated variables here.</li>
<li>Finally, note that after all this setup a new XML settings file is saved. The idea is that the original pecan.xml you create is preserved for provenance, and then periodically throughout the workflow the settings (likely containing new information) are re-saved with descriptive filenames.</li>
</ul></li>
<li>MCMC loop
<ul>
<li>Periodically adjust jump distribution to make acceptance rate closer to target</li>
<li>Propose new parameters one at a time. For each:
<ul>
<li>First, note that Pecan may be handling many more parameters than are actually being targeted by PDA. Pecan puts priors on any variables it has information for (in the BETY database), and then these get passed around throughout the analysis and every step (meta-, sensitivity, ensemble analyses, etc.). But for PDA, you specify a separate list of probably far fewer parameters to constrain with data. These are the ones that get looped over and varied here. The distinction between all parameters and only those dealt with in PDA is dealt with in the setup code above.</li>
<li>First a new value is proposed for the parameter of interest.</li>
<li>Then, a new model run is set up, identical to the previous except with the new proposed value for the one parameter being updated on this run.</li>
<li>The model run is started, and outputs collected after waiting for it to finish.</li>
<li>A new likelihood is calculated based on the model outputs and the observed dataset provided.</li>
<li>Standard Metropolis acceptance criteria is used to decide whether to keep the proposed parameter.</li>
<li>Periodically (at interval specified in settings), a diagnostic figure is saved to disk so you can check on progress.</li>
</ul></li>
<li>This works only for NEE currently</li>
</ul></li>
</ul>
</div>
<div id="pda.mcmc.bs.r" class="section level3">
<h3><span class="header-section-number">9.1.2</span> <strong>pda.mcmc.bs.R</strong></h3>
<p>This file is basically identical to pda.mcm.R, but rather than propose parameters one at a time, it proposes new values for all parameters at once (“bs” stands for “block sampling”). You choose which option to use by specifying settings<span class="math inline">\(assim.batch\)</span>method:
* “bruteforce” means sample parameters one at a time
* “bruteforce.bs” means use this version, sampling all parameters at once
* “emulator” means use the emulated-likelihood version</p>
</div>
<div id="pda.emulator" class="section level3">
<h3><span class="header-section-number">9.1.3</span> <strong>pda.emulator</strong></h3>
<p>This version of the PDA code again looks quite similar to the basic “bruteforce” one, but its mechanics are very different. The basic idea is, rather than running thousands of model iterations to explore parameter space via MCMC, run a relatively smaller number of runs that have been carefully chosen to give good coverage of parameter space. Then, basically interpolate the likelihood calculated for each of those runs (actually, fit a Gaussian process to it), to get a surface that “emulates” the true likelihood. Now, perform regular MCMC (just like the “bruteforce” approach), except instead of actually running the model on every iteration to get a likelihood, just get an approximation from the likelihood emulator. Since the latter step takes virtually no time, you can run as long of an MCMC as you need at little computational cost, once you have done the initial model runs to create the likelihood emulator.</p>
</div>
<div id="pda.mcmc.recover.r" class="section level3">
<h3><span class="header-section-number">9.1.4</span> <strong>pda.mcmc.recover.R</strong></h3>
<p>This function is for recovering a failed PDA MCMC run.</p>
</div>
<div id="pda.utils.r" class="section level3">
<h3><span class="header-section-number">9.1.5</span> <strong>pda.utils.R</strong></h3>
<p>This file contains most of the individual functions used by the main PDA functions (pda.mcmc.*.R).</p>
<ul>
<li><em>assim.batch</em> is the main function Pecan calls to do PDA. It checks which method is requested (bruteforce, bruteforce.bs, or emulator) and call the appropriate function described above.</li>
<li><em>pda.setting</em> handles settings. If a setting isn’t found, the code can usually supply a reasonable default.</li>
<li><em>pda.load.priors</em> is fairly self explanatory, except that it handles a lot of cases and gives different options priority over others. Basically, the priors to use for PDA parameters can come from either a Pecan prior.distns or post.distns object (the latter would be, e.g., the posteriors of a meta-analysis or previous PDA), or specified either by file path or BETY ID. If not told otherwise, the code tries to just find the most recent posterior in BETY, and use that as prior for PDA.</li>
<li><em>pda.create.ensemble</em> gets an ensemble ID for the PDA. All model runs associated with an individual PDA (any of the three methods) are considered part of a single ensemble. This function does is register a new ensemble in BETY, and return the ID that BETY gives it.</li>
<li><em>pda.define.prior.fn</em> creates R functions for all of the priors the PDA will use.</li>
<li><em>pda.init.params</em> sets up the parameter matrix for the run, which has one row per iteration, and one column per parameter. Columns include all Pecan parameters, not just the (probably small) subset that are being updated by PDA. This is for compatibility with other Pecan components. If starting a fresh run, the returned matrix is just a big empty matrix to fill in as the PDA runs. If continuing an existing MCMC, then it will be the previous params matrix, with a bunch of blank rows added on for filling in during this round of PDA.</li>
<li><em>pda.init.run</em> This is basically a big wrapper for Pecan’s write.config function (actually functions [plural], since every model in Pecan has its own version). For the bruteforce and bruteforce.bs methods this will be run once per iteration, whereas the emulator method knows about all its runs ahead of time and this will be a big batch of all runs at once.</li>
<li><em>pda.adjust.jumps</em> tweaks the jump distributions for the standard MCMC method, and <em>pda.adjust.jumps.bs</em> does the same for the block-sampled version.</li>
<li><em>pda.calc.llik</em> calculates the log-likelihood of the model given all datasets provided to compare it to.</li>
<li><em>pda.generate.knots</em> is for the emulator version of PDA. It uses a Latin hypercube design to sample a specified number of locations in parameter space. These locations are where the model will actually be run, and then the GP interpolates the likelihood surface in between.</li>
<li><em>pda.plot.params</em> provides basic MCMC diagnostics (trace and density) for parameters being sampled.</li>
<li><em>pda.postprocess</em> prepares the posteriors of the PDA, stores them to files and the database, and performs some other cleanup functions.</li>
<li><em>pda.load.data.r</em> This is the function that loads in data that will be used to constrain the PDA. It’s supposed to be eventually more integrated with Pecan, which will know how to load all kinds of data from all kinds of sources. For now, it can do NEE from Ameriflux.</li>
<li><em>pda.define.llik.r</em> A simple helper function that defines likelihood functions for different datasets. Probably in the future this should be queried from the database or something. For now, it is extremely limited. The original test case of NEE assimilation uses a heteroskedastic Laplacian distribution.</li>
<li><em>pda.get.model.output.R</em> Another function that will eventually grow to handle many more cases, or perhaps be replaced by a better system altogether. For now though, it again just handles Ameriflux NEE.</li>
</ul>
</div>
<div id="get.da.data..r-plot.da.r" class="section level3">
<h3><span class="header-section-number">9.1.6</span> <strong>get.da.data.*.R, plot.da.R</strong></h3>
<p>Old codes written by Carl Davidson. Defunct now, but may contain good ideas so currently left in.</p>
</div>
</div>
<div id="sda" class="section level2">
<h2><span class="header-section-number">9.2</span> State data assimilation (SDA)</h2>
<p><code>sda.enkf.R</code> is housed within: <code>/pecan/modules/assim.sequential/R</code></p>
<p>The tree ring tutorial is housed within: <code>/pecan/documentation/tutorials/StateAssimilation</code></p>
<p>More descriptive SDA methods can be found at: <code>/pecan/book_source/adve_user_guide_web/SDA_Methods.Rmd</code></p>
<div id="sda.enkf.r-description" class="section level3">
<h3><span class="header-section-number">9.2.1</span> <strong>sda.enkf.R Description</strong></h3>
<p>This is the main ensemble Kalman filter and generalized filter code. Originally, this was just ensemble Kalman filter code. Mike Dietze and Ann Raiho added a generalized ensemble filter to avoid filter divergence. The output of this function will be all the of run outputs, a PDF of diagnostics, and an Rdata object that includes three lists:</p>
<ul>
<li>FORECAST will be the ensemble forecasts for each year</li>
<li>ANALYSIS will be the updated ensemble sample given the NPP observations</li>
<li>enkf.params contains the prior and posterior mean vector and covariance matrix for each time step.</li>
</ul>
</div>
<div id="sda.enkf.r-arguments" class="section level3">
<h3><span class="header-section-number">9.2.2</span> <strong>sda.enkf.R Arguments</strong></h3>
<ul>
<li><p>settings - (required) <a href="settings-configured-analyses.html#state-data-assimilation-tags-example">State Data Assimilation Tags Example</a> settings object</p></li>
<li><p>obs.mean - (required) a list of observation means named with dates in YYYY/MM/DD format</p></li>
<li><p>obs.cov - (required) a list of observation covariances names with dates in YYYY/MM/DD format</p></li>
<li><p>IC - (optional) initial condition matrix (dimensions: ensemble memeber # by state variables). Default is NULL.</p></li>
<li><p>Q - (optional) process covariance matrix (dimensions: state variable by state variables). Defualt is NULL.</p></li>
</ul>
</div>
<div id="state-data-assimilation-workflow" class="section level3">
<h3><span class="header-section-number">9.2.3</span> State Data Assimilation Workflow</h3>
<p>Before running sda.enkf, these tasks must be completed (in no particular order),</p>
<ul>
<li><p>Read in a <a href="settings-configured-analyses.html#state-data-assimilation-tags-example">State Data Assimilation Tags Example</a> settings file with tags listed below. i.e. read.settings(‘pecan.SDA.xml’)</p></li>
<li><p>Load data means (obs.mean) and covariances (obs.cov) as lists with PEcAn naming and unit conventions. Each observation must have a date in YYYY/MM/DD format (optional time) associated with it. If there are missing data, the date must still be represented in the list with an NA as the list object.</p></li>
<li><p>Create initial conditions matrix (IC) that is state variables columns by ensemble members rows in dimension. <a href="settings-configured-analyses.html#sample.ic.model.r">sample.IC.MODEL</a> can be used to create the IC matrix, but it is not required. This IC matrix is fed into write.configs for the initial model runs.</p></li>
</ul>
<p>The main parts of the SDA function are:</p>
<p>Setting up for initial runs:</p>
<ul>
<li><p>Set parameters</p></li>
<li><p>Load initial run inputs via <a href="settings-configured-analyses.html#split.inputs.model.r">split.inputs.MODEL</a></p></li>
<li><p>Open database connection</p></li>
<li><p>Get new workflow ids</p></li>
<li><p>Create ensemble ids</p></li>
</ul>
<p>Performing the initial set of runs</p>
<p>Set up for data assimilation</p>
<p>Loop over time</p>
<ul>
<li><p><a href="settings-configured-analyses.html#read.restart.model.r">read.restart.MODEL</a> - read model restart files corresponding to start.time and stop.time that you want to assimilate data into</p></li>
<li><p>Analysis - There are four choices based on if process variance is TRUE or FALSE and if there is data or not. <a href="settings-configured-analyses.html#analysis-options">See explaination below.</a></p></li>
<li><p><a href="settings-configured-analyses.html#write.restart.model.r">write.restart.MODEL</a> - This function has two jobs. First, to insert adjusted state back into model restart file. Second, to update start.time, stop.time, and job.sh.</p></li>
<li><p>run model</p></li>
</ul>
<p>Save outputs</p>
<p>Create diagnostics</p>
</div>
<div id="state-data-assimilation-tags-example" class="section level3">
<h3><span class="header-section-number">9.2.4</span> State Data Assimilation Tags Example</h3>
<pre><code>&lt;state.data.assimilation&gt;
  &lt;adjustment&gt;TRUE&lt;/adjustment&gt;
  &lt;process.variance&gt;FALSE&lt;/process.variance&gt;
  &lt;sample.parameters&gt;FALSE&lt;/sample.parameters&gt;
   &lt;state.variables&gt;
    &lt;variable&gt;
      &lt;variable.name&gt;AGB.pft&lt;/variable.name&gt;
      &lt;unit&gt;MgC/ha/yr&lt;/unit&gt;
      &lt;min_value&gt;0&lt;/min_value&gt;
      &lt;max_value&gt;100000000&lt;/max_value&gt;
    &lt;/variable&gt;
    &lt;variable&gt;
      &lt;variable.name&gt;TotSoilCarb&lt;/variable.name&gt;
      &lt;unit&gt;KgC/m^2&lt;/unit&gt;
      &lt;min_value&gt;0&lt;/min_value&gt;
      &lt;max_value&gt;100000000&lt;/max_value&gt;
    &lt;/variable&gt;
  &lt;/state.variables&gt;
  &lt;spin.up&gt;
    &lt;start.date&gt;1950/01/01&lt;/start.date&gt;
    &lt;end.date&gt;1960/12/31&lt;/end.date&gt;
  &lt;/spin.up&gt;
  &lt;forecast.time.step&gt;1&lt;/forecast.time.step&gt;
  &lt;start.date&gt;1961/01/01&lt;/start.date&gt;
  &lt;end.date&gt;2010/12/31&lt;/end.date&gt;
 &lt;/state.data.assimilation&gt;</code></pre>
</div>
<div id="state-data-assimilation-tags-descriptions" class="section level3">
<h3><span class="header-section-number">9.2.5</span> State Data Assimilation Tags Descriptions</h3>
<ul>
<li><strong>adjustment</strong> : [optional] TRUE/FLASE flag for if ensembles needs to be adjusted based on weights estimated given their likelihood during analysis step. The defualt is TRUE for this flag.</li>
<li><strong>process.variance</strong> : [optional] TRUE/FLASE flag for if process variance should be estimated (TRUE) or not (FALSE). If TRUE, a generalized ensemble filter will be used. If FALSE, an ensemble Kalman filter will be used. Default is FALSE.</li>
<li><strong>sample.parameters</strong> : [optional] TRUE/FLASE flag for if parameters should be sampled for each ensemble member or not. This allows for more spread in the initial conditions of the forecast.</li>
<li><strong>state.variable</strong> : [required] State variable that is to be assimilated (in PEcAn standard format).</li>
<li><strong>spin.up</strong> : [required] start.date and end.date for initial model runs.</li>
<li><strong><em>NOTE:</em></strong> start.date and end.date are distinct from values set in the run tag because initial runs can be done over a subset of the full run.</li>
<li><strong>forecast.time.step</strong> : [optional] In the future, this will be used to allow the forecast time step to vary from the data time step.</li>
<li><strong>start.date</strong> : [optional] start date of the state data assimilation (in YYYY/MM/DD format)</li>
<li><strong>end.date</strong> : [optional] end date of the state data assimilation (in YYYY/MM/DD format)</li>
<li><strong><em>NOTE:</em></strong> start.date and end.date are distinct from values set in the run tag because this analysis can be done over a subset of the run.</li>
</ul>
</div>
<div id="model-specific-functions-for-sda-workflow" class="section level3">
<h3><span class="header-section-number">9.2.6</span> Model Specific Functions for SDA Workflow</h3>
<div id="read.restart.model.r" class="section level4">
<h4><span class="header-section-number">9.2.6.1</span> read.restart.MODEL.R</h4>
<p>The purpose of read.restart is to read model restart files and return a matrix that is site rows by state variable columns. The state variables must be in PEcAn names and units. The arguments are:</p>
<ul>
<li><p>outdir - output directory</p></li>
<li><p>runid - ensemble member run ID</p></li>
<li><p>stop.time - used to determine which restart file to read (in POSIX format)</p></li>
<li><p>settings - <a href="settings-configured-analyses.html#state-data-assimilation-tags-example">pecan.SDA.xml</a> settings object</p></li>
<li><p>var.names - vector with state variable names with PEcAn standard naming. Example: c(‘AGB.pft’, ‘TotSoilCarb’)</p></li>
<li><p>params - parameters used by ensemble member (same format as write.configs)</p></li>
</ul>
</div>
<div id="write.restart.model.r" class="section level4">
<h4><span class="header-section-number">9.2.6.2</span> write.restart.MODEL.R</h4>
<p>This model specific function takes in new state and new parameter matrices from sda.enkf.R after the analysis step and translates new variables back to the model variables. Then, updates start.time, stop.time, and job.sh so that start.model.runs() does the correct runs with the new states. In write.restart.LINKAGES and write.restart.SIPNET, job.sh is updated by using write.configs.MODEL.</p>
<ul>
<li><p>outdir - output directory</p></li>
<li><p>runid - run ID for ensemble member</p></li>
<li><p>start.time - beginning of model run (in POSIX format)</p></li>
<li><p>stop.time - end of model run (in POSIX format)</p></li>
<li><p>settings - <a href="settings-configured-analyses.html#state-data-assimilation-tags-example">pecan.SDA.xml</a> settings object</p></li>
<li><p>new.state - matrix from analysis of updated state variables with PEcAn names (dimensions: site rows by state variables columns)</p></li>
<li><p>new.params - In the future, this will allow us to update parameters based on states (same format as write.configs)</p></li>
<li><p>inputs - model specific inputs from <a href="settings-configured-analyses.html#split.inputs.model.r">split.inputs.MODEL</a> used to run the model from start.time to stop.time</p></li>
<li><p>RENAME - [optional] Flag used in write.restart.LINKAGES.R for development.</p></li>
</ul>
</div>
<div id="split.inputs.model.r" class="section level4">
<h4><span class="header-section-number">9.2.6.3</span> split.inputs.MODEL.R</h4>
<p>This model specific function gives the correct met and/or other model inputs to settings<span class="math inline">\(run\)</span>inputs. This function returns settings<span class="math inline">\(run\)</span>inputs to an inputs argument in sda.enkf.R. But, the inputs will not need to change for all models and should return settings<span class="math inline">\(run\)</span>inputs unchanged if that is the case.</p>
<ul>
<li><p>settings - <a href="settings-configured-analyses.html#state-data-assimilation-tags-example">pecan.SDA.xml</a> settings object</p></li>
<li><p>start.time - start time for model run (in POSIX format)</p></li>
<li><p>stop.time - stop time for model run (in POSIX format)</p></li>
</ul>
</div>
<div id="sample.ic.model.r" class="section level4">
<h4><span class="header-section-number">9.2.6.4</span> sample.IC.MODEL.R</h4>
<p>This model specific function is optional. But, it can be used to create initial condition matrix (IC) with # state variables columns by # ensemble rows. This IC matrix is used for the initial runs in sda.enkf.R in the write.configs.MODEL function.</p>
<ul>
<li><p>ne - number of ensemble members</p></li>
<li><p>state - matrix of state variables to get initial conditions from</p></li>
<li><p>year - used to determine which year to sample initial conditions from</p></li>
</ul>
</div>
</div>
<div id="analysis-options" class="section level3">
<h3><span class="header-section-number">9.2.7</span> Analysis Options</h3>
<p>There are four options depending on whether process variance is TRUE/FALSE and whether or not there is data or not.</p>
<ul>
<li><p>If there is no data and process variance = FALSE, there is no analysis step.</p></li>
<li><p>If there is no data and process variance = TRUE, process variance is added to the forecast.</p></li>
<li><p>If there is data and process variance = TRUE, <a href="settings-configured-analyses.html#the-generalized-ensemble-filter">the generalized ensemble filter</a> is implemented with MCMC.</p></li>
<li><p>If there is data and process variance = FALSE, the Kalman filter is used and solved analytically.</p></li>
</ul>
</div>
<div id="the-generalized-ensemble-filter" class="section level3">
<h3><span class="header-section-number">9.2.8</span> The Generalized Ensemble Filter</h3>
<p>An ensemble filter is a sequential data assimilation algorithm with two procedures at every time step: a forecast followed by an analysis. The forecast ensembles arise from a model while the analysis makes an adjustment of the forecasts ensembles from the model towards the data. An ensemble Kalman filter is typically suggested for this type of analysis because of its computationally efficient analytical solution and its ability to update states based on an estimate of covariance structure. But, in some cases, the ensemble Kalman filter fails because of filter divergence. Filter divergence occurs when forecast variability is too small, which causes the analysis to favor the forecast and diverge from the data. Models often produce low forecast variability because there is little internal stochasticity. Our ensemble filter overcomes this problem in a Bayesian framework by including an estimation of model process variance. This methodology also maintains the benefits of the ensemble Kalman filter by updating the state vector based on the estimated covariance structure.</p>
<p>This process begins after the model is spun up to equilibrium.</p>
<p>The likelihood function uses the data vector <span class="math inline">\(\left(\boldsymbol{y_{t}}\right)\)</span> conditional on the estimated state vector <span class="math inline">\(\left(\boldsymbol{x_{t}}\right)\)</span> such that</p>
<p><span class="math inline">\(\boldsymbol{y}_{t}\sim\mathrm{multivariate\:normal}(\boldsymbol{x}_{t},\boldsymbol{R}_{t})\)</span></p>
<p>where <span class="math inline">\(\boldsymbol{R}_{t}=\boldsymbol{\sigma}_{t}^{2}\boldsymbol{I}\)</span> and <span class="math inline">\(\boldsymbol{\sigma}_{t}^{2}\)</span> is a vector of data variances. To obtain an estimate of the state vector <span class="math inline">\(\left(\boldsymbol{x}_{t}\right)\)</span>, we use a process model that incorporates a process covariance matrix <span class="math inline">\(\left(\boldsymbol{Q}_{t}\right)\)</span>. This process covariance matrix differentiates our methods from past ensemble filters. Our process model contains the following equations</p>
<p><span class="math inline">\(\boldsymbol{x}_{t} \sim \mathrm{multivariate\: normal}(\boldsymbol{x}_{model_{t}},\boldsymbol{Q}_{t})\)</span></p>
<p><span class="math inline">\(\boldsymbol{x}_{model_{t}} \sim \mathrm{multivariate\: normal}(\boldsymbol{\mu}_{forecast_{t}},\boldsymbol{P}_{forecast_{t}})\)</span></p>
<p>where <span class="math inline">\(\boldsymbol{\mu}_{forecast_{t}}\)</span> is a vector of means from the ensemble forecasts and <span class="math inline">\(\boldsymbol{P}_{forecast_{t}}\)</span> is a covariance matrix calculated from the ensemble forecasts. The prior for our process covariance matrix is <span class="math inline">\(\boldsymbol{Q}_{t}\sim\mathrm{Wishart}(\boldsymbol{V}_{t},n_{t})\)</span> where <span class="math inline">\(\boldsymbol{V}_{t}\)</span> is a scale matrix and <span class="math inline">\(n_{t}\)</span> is the degrees of freedom. The prior shape parameters are updated at each time step through moment matching such that</p>
<p><span class="math inline">\(\boldsymbol{V}_{t+1} = n_{t}\bar{\boldsymbol{Q}}_{t}\)</span></p>
<p><span class="math inline">\(n_{t+1} = \frac{\sum_{i=1}^{I}\sum_{j=1}^{J}\frac{v_{ijt}^{2}+v_{iit}v_{jjt}}{Var(\boldsymbol{\bar{Q}}_{t})}}{I\times J}\)</span></p>
<p>where we calculate the mean of the process covariance matrix <span class="math inline">\(\left(\bar{\boldsymbol{Q}_{t}}\right)\)</span> from the posterior samples at time t. Degrees of freedom for the Wishart are typically calculated element by element where <span class="math inline">\(v_{ij}\)</span> are the elements of <span class="math inline">\(\boldsymbol{V}_{t}\)</span>. <span class="math inline">\(I\)</span> and <span class="math inline">\(J\)</span> index rows and columns of <span class="math inline">\(\boldsymbol{V}\)</span>. Here, we calculate a mean number of degrees of freedom for <span class="math inline">\(t+1\)</span> by summing over all the elements of the scale matrix <span class="math inline">\(\left(\boldsymbol{V}\right)\)</span> and dividing by the count of those elements <span class="math inline">\(\left(I\times J\right)\)</span>. We fit this model sequentially through time in the R computing environment using R package ‘rjags.’</p>
</div>
<div id="multi-site-state-data-assimilation." class="section level3">
<h3><span class="header-section-number">9.2.9</span> Multi-site State data assimilation.</h3>
<p><code>sda.enkf.multisite</code> function allows for assimilation of observed data at multiple sites at the same time. In order to run a multi-site SDA, one needs to send a multisettings pecan xml file to this function. This multisettings xml file needs to contain information required for running at least two sites under <code>run</code> tag. The code will automatically run the ensembles for all the sites and reformats the outputs matching the required formats for analysis step.</p>
<p>The observed mean and cov needs to be formatted as list of different dates with observations. For each element of this list also there needs to be a list with mean and cov matrices of different sites named by their siteid. This would look like something like this:</p>
<pre><code>&gt; obs.mean

$`2010/12/31`
$`2010/12/31`$`1000000650`
   AbvGrndWood     GWBI
    111.502    1.0746

$`2010/12/31`$`1000000651`
   AbvGrndWood     GWBI
    114.302    1.574695</code></pre>
<pre><code>&gt; obs.cov

$`2010/12/31`
$`2010/12/31`$`1000000650`
           [,1]        [,2]
[1,] 19.7821691 0.213584319
[2,]  0.5135843 0.005162113

$`2010/12/31`$`1000000651`
           [,1]        [,2]
[1,] 15.2821691 0.513584319
[2,]  0.1213583 0.001162113</code></pre>
<p>An example of multi-settings pecan xml file also may look like below:</p>
<pre><code>&lt;?xml version=&quot;1.0&quot;?&gt;
&lt;pecan.multi&gt;
 &lt;state.data.assimilation&gt;
   &lt;process.variance&gt;FALSE&lt;/process.variance&gt;
   &lt;adjustment&gt;TRUE&lt;/adjustment&gt;
   &lt;data&gt;
    &lt;format_id&gt;1000000040&lt;/format_id&gt;
    &lt;input.id&gt;1000013298&lt;/input.id&gt;
  &lt;/data&gt;
   &lt;state.variables&gt;
   &lt;variable&gt;
      &lt;variable.name&gt;GWBI&lt;/variable.name&gt;
   &lt;unit&gt;KgC/m^2&lt;/unit&gt;
       &lt;min_value&gt;0&lt;/min_value&gt;
       &lt;max_value&gt;9999&lt;/max_value&gt;
   &lt;/variable&gt;
   &lt;variable&gt;
   &lt;variable.name&gt;AbvGrndWood&lt;/variable.name&gt;
   &lt;unit&gt;KgC/m^2&lt;/unit&gt;
   &lt;min_value&gt;0&lt;/min_value&gt;
   &lt;max_value&gt;9999&lt;/max_value&gt;
   &lt;/variable&gt;
   &lt;/state.variables&gt;
  &lt;start.date&gt;1960/01/01&lt;/start.date&gt;
  &lt;end.date&gt;2000/12/31&lt;/end.date&gt;
  &lt;/state.data.assimilation&gt;
 &lt;info&gt;
    &lt;notes&gt;&lt;/notes&gt;
    &lt;userid&gt;-1&lt;/userid&gt;
    &lt;username&gt;&lt;/username&gt;
    &lt;date&gt;2017/12/06 21:19:33 +0000&lt;/date&gt;
  &lt;/info&gt;
 &lt;outdir&gt;/fs/data3/hamzed/output/MultiSite_Sandbox/paleon_sda_SIPNET-8768&lt;/outdir&gt;
 &lt;database&gt;
    &lt;bety&gt;
      &lt;user&gt;bety&lt;/user&gt;
      &lt;password&gt;bety&lt;/password&gt;
      &lt;host&gt;128.197.168.114&lt;/host&gt;
      &lt;dbname&gt;bety&lt;/dbname&gt;
      &lt;driver&gt;PostgreSQL&lt;/driver&gt;
      &lt;write&gt;false&lt;/write&gt;
    &lt;/bety&gt;
    &lt;dbfiles&gt;/fs/data1/pecan.data/dbfiles/&lt;/dbfiles&gt;
  &lt;/database&gt;
 &lt;pfts&gt;
  &lt;pft&gt;
   &lt;name&gt;temperate.deciduous_SDA&lt;/name&gt;
   &lt;constants&gt;
    &lt;num&gt;2&lt;/num&gt;
   &lt;/constants&gt;
   &lt;outdir&gt;/fs/data2/output//PEcAn_1000008768/pft/temperate.deciduous_SDA&lt;/outdir&gt;
   &lt;posteriorid&gt;1000008552&lt;/posteriorid&gt;
  &lt;/pft&gt;
 &lt;/pfts&gt;
 &lt;meta.analysis&gt;
    &lt;iter&gt;3000&lt;/iter&gt;
    &lt;random.effects&gt;FALSE&lt;/random.effects&gt;
  &lt;/meta.analysis&gt;
 &lt;ensemble&gt;
  &lt;size&gt;20&lt;/size&gt;
  &lt;ensemble.id&gt;1000016146&lt;/ensemble.id&gt;
  &lt;start.year&gt;1995&lt;/start.year&gt;
  &lt;end.year&gt;1999&lt;/end.year&gt;
  &lt;samplingspace&gt;
  &lt;parameters&gt;
    &lt;method&gt;uniform&lt;/method&gt;
  &lt;/parameters&gt;
  &lt;met&gt;
    &lt;method&gt;sampling&lt;/method&gt;
  &lt;/met&gt;
  &lt;soil&gt;    
  &lt;parent&gt;parameters&lt;/parent&gt;
  &lt;/soil&gt;
  &lt;vegetation&gt;
  &lt;parent&gt;soil&lt;/parent&gt;
  &lt;/vegetation&gt;
  &lt;/samplingspace&gt;
 &lt;/ensemble&gt;
 &lt;model&gt;
  &lt;id&gt;1000000022&lt;/id&gt;
  &lt;default.param&gt;/fs/data3/hamzed/output/paleon_sda_SIPNET-8768/Bartlett.param&lt;/default.param&gt;
  &lt;type&gt;SIPNET&lt;/type&gt;
  &lt;revision&gt;r136&lt;/revision&gt;
  &lt;delete.raw&gt;FALSE&lt;/delete.raw&gt;
  &lt;binary&gt;/fs/data5/pecan.models/SIPNET/trunk/sipnet_ssr&lt;/binary&gt;
 &lt;/model&gt;
 &lt;workflow&gt;
    &lt;id&gt;1000008768&lt;/id&gt;
  &lt;/workflow&gt;
 &lt;run&gt;
  &lt;settings.1000000650&gt;
  &lt;site&gt;
   &lt;id&gt;1000000650&lt;/id&gt;
   &lt;met.start&gt;1960/01/01&lt;/met.start&gt;
   &lt;met.end&gt;1965/12/31&lt;/met.end&gt;
   &lt;name&gt;Harvard Forest - Lyford Plots (PalEON PHA)&lt;/name&gt;
   &lt;lat&gt;42.53&lt;/lat&gt;
   &lt;lon&gt;-72.18&lt;/lon&gt;
  &lt;/site&gt;
  &lt;inputs&gt;
   &lt;met&gt;
    &lt;source&gt;CRUNCEP&lt;/source&gt;
    &lt;output&gt;SIPNET&lt;/output&gt;
    &lt;path&gt;
    &lt;path1&gt;/fs/data1/pecan.data/dbfiles/CRUNCEP_SIPNET_site_0-758/CRUNCEP.1960-01-01.2010-12-31.clim&lt;/path1&gt;
    &lt;/path&gt;
   &lt;/met&gt;
  &lt;/inputs&gt;
  &lt;start.date&gt;1960/01/01&lt;/start.date&gt;
  &lt;end.date&gt;1980/12/31&lt;/end.date&gt;
  &lt;/settings.1000000650&gt;
  &lt;settings.1000000651&gt;
  &lt;site&gt;
   &lt;id&gt;1000000651&lt;/id&gt;
   &lt;met.start&gt;1960/01/01&lt;/met.start&gt;
   &lt;met.end&gt;1965/12/31&lt;/met.end&gt;
   &lt;name&gt;Harvard Forest - Lyford Plots (PalEON PHA)&lt;/name&gt;
   &lt;lat&gt;42.53&lt;/lat&gt;
   &lt;lon&gt;-72.18&lt;/lon&gt;
  &lt;/site&gt;
  &lt;inputs&gt;
   &lt;met&gt;
    &lt;source&gt;CRUNCEP&lt;/source&gt;
    &lt;output&gt;SIPNET&lt;/output&gt;
    &lt;path&gt;
    &lt;path1&gt;/fs/data1/pecan.data/dbfiles/CRUNCEP_SIPNET_site_0-758/CRUNCEP.1960-01-01.2010-12-31.clim&lt;/path1&gt;
    &lt;/path&gt;
   &lt;/met&gt;
  &lt;/inputs&gt;
  &lt;start.date&gt;1960/01/01&lt;/start.date&gt;
  &lt;end.date&gt;1980/12/31&lt;/end.date&gt;
  &lt;/settings.1000000651&gt;
 &lt;/run&gt;
 &lt;host&gt;
  &lt;name&gt;localhost&lt;/name&gt;
  &lt;rundir&gt;/fs/data3/hamzed/output/MultiSite_Sandbox/paleon_sda_SIPNET-8768/run&lt;/rundir&gt;
  &lt;outdir&gt;/fs/data3/hamzed/output/MultiSite_Sandbox/paleon_sda_SIPNET-8768/out&lt;/outdir&gt;
 &lt;/host&gt;
 &lt;settings.info&gt;
  &lt;deprecated.settings.fixed&gt;TRUE&lt;/deprecated.settings.fixed&gt;
  &lt;settings.updated&gt;TRUE&lt;/settings.updated&gt;
  &lt;checked&gt;TRUE&lt;/checked&gt;
 &lt;/settings.info&gt;
 &lt;rundir&gt;/fs/data3/hamzed/output/MultiSite_Sandbox/paleon_sda_SIPNET-8768/run&lt;/rundir&gt;
 &lt;modeloutdir&gt;/fs/data3/hamzed/output/MultiSite_Sandbox/paleon_sda_SIPNET-8768/out&lt;/modeloutdir&gt;
 &lt;multisettings&gt;run&lt;/multisettings&gt;
&lt;/pecan.multi&gt;</code></pre>
<p>==&gt; 03_hidden_analyses/03_sda_methods.Rmd &lt;==
## State Data Assimilation Methods</p>
<p><em>By Ann Raiho</em></p>
<p>Our goal is build a fully generalizable state data assimilation (SDA) workflow that will assimilate multiple types of data and data products into ecosystem models within PEcAn temporally and spatially. But, during development, specifically with PalEON goals in mind, we have been focusing on assimilating tree ring estimated NPP and AGB and pollen derived fractional composition into two ecosystem models, SIPNET and LINKAGES, at Harvard Forest. This methodology will soon be expanded to include the PalEON sites listed on the <a href="https://paleon.geography.wisc.edu/doku.php/working_groups;state_data_assimilation">state data assimilation wiki page</a>.</p>
</div>
<div id="data-products" class="section level3">
<h3><span class="header-section-number">9.2.10</span> Data Products</h3>
<p>During workflow development, we have been working with tree ring estimated NPP and AGB and pollen derived fractional composition data products. Both of these data products have been estimated with a full accounting of uncertainty, which provides us with state variable observation mean vector and covariance matrix at each time step. These data products are discussed in more detail below. Even though we have been working with specific data products during development, our workflow is generalizable to alternative data products as long as we can calculate a state variable observation mean vector and covariance for a time point.</p>
<div id="tree-rings" class="section level4">
<h4><span class="header-section-number">9.2.10.1</span> Tree Rings</h4>
<p>We have been primarily been working with the tree ring data product created by Andria Dawson and Chris Paciorek and the PEcAn tree ring allometry module. They have developed a Bayesian model that estimates annual aboveground biomass increment (Mg/ha/yr) and aboveground biomass (Mg/ha) for each tree in a dataset. We obtain this data and aggregate to the level appropriate for the ecosystem model. In SIPNET, we are assimilating annual gross woody increment (Mg/ha/yr) and above ground woody biomass (Mg/ha). In LINKAGES, we are assimilating annual species biomass. More information on deriving these tree ring data products can be found in Dawson et al 201?.</p>
<p>We have been working mostly with tree data collected at Harvard Forest. Tree rings and census data were collected at Lyford Plot between 1960 and 2010 in three separate plots. Other tree ring data will be added to this analysis in the future from past PEON courses (UNDERC), Kelly Heilman (Billy’s Lake and Bigwoods), and Alex Dye (Huron Mt. Club).</p>
</div>
<div id="pollen" class="section level4">
<h4><span class="header-section-number">9.2.10.2</span> Pollen</h4>
<p>STEPPS is a Bayesian model developed by Paciorek and McLachlan 2009 and Dawson et al 2016 to estimate spatially gridded fractional composition from fossil pollen. We have been working with STEPPS1 output, specifically with the grid cell that contains Harvard Forest. The temporal resolution of this data product is centennial. Our workflow currently operates at annual time steps, but does not require data at every time step. So, it is possible to assimilate fractional composition every one hundred years or to assimilate fractional composition data every year by accounting for variance inflation.</p>
<p>In the future, pollen derived biomass (ReFAB) will also be available for data assimilation. Although, we have not discussed how STEPPS and ReFAB data assimilation will work.</p>
</div>
<div id="variance-inflation" class="section level4">
<h4><span class="header-section-number">9.2.10.3</span> Variance Inflation</h4>
<p>*Side Note: Probably want to call this something else now.</p>
<p>Since the fractional composition data product has a centennial resolution, in order to use fractional composition information every year we need to change the weight the data has on the analysis. The basic idea is to downweight the likelihood relative to the prior to account for (a) the fact that we assimilate an observation multiple times and (b) the fact that the number of STEPPS observations is ‘inflated’ because of the autocorrelation. To do this, we take the likelihood and raise it to the power of (1/w) where ‘w’ is an inflation factor.</p>
<p>w = D * (N / ESS)</p>
<p>where D is the length of the time step. In our case D = 100. N is the number of time steps. In our case N = 11. and ESS is the effective sample size. The ESS is calculated with the following function where ntimes is the same as N above and sims is a matrix with the dimensions number of MCMC samples by number of state variables.</p>
<pre><code>ESS_calc &lt;- function(ntimes, sims){
        # center based on mean at each time to remove baseline temporal correlation 
        # (we want to estimate effective sample size effect from correlation of the errors)
        row.means.sims &lt;- sims - rowMeans(sims)  
        
        # compute all pairwise covariances at different times
        covars &lt;- NULL
        for(lag in 1:(ntimes-1)){
          covars &lt;- c(covars, rowMeans(row.means.sims[(lag+1):ntimes, , drop = FALSE] * row.means.sims[1:(ntimes-lag), , drop = FALSE])) 
        }
        vars &lt;- apply(row.means.sims, 1, var) # pointwise post variances at each time, might not be homoscedastic
        
        # nominal sample size scaled by ratio of variance of an average
        # under independence to variance of average of correlated values
        neff &lt;- ntimes * sum(vars) / (sum(vars) + 2 * sum(covars))
        return(neff)
      }</code></pre>
<p>The ESS for the STEPPS1 data product is 3.6, so w in our assimilation of fractional composition at Harvard Forest will be w = 305.6.</p>
</div>
</div>
<div id="current-models" class="section level3">
<h3><span class="header-section-number">9.2.11</span> Current Models</h3>
<p>SIPNET and LINKAGES are the two ecosystem models that have been used during state data assimilation development within PEcAn. SIPNET is a simple ecosystem model that was built for… LINKAGES is a forest gap model created to simulate the process of succession that occurs when a gap is opened in the forest canopy. LINKAGES has 72 species level plant functional types and the ability to simulate some below ground processes (C and N cycles).</p>
</div>
<div id="model-calibration" class="section level3">
<h3><span class="header-section-number">9.2.12</span> Model Calibration</h3>
<p>Without model calibration both SIPNET and LINKAGES make incorrect predictions about Harvard Forest. To confront this problem, SIPNET and LINKAGES will both be calibrated using data collected at the Harvard Forest flux tower. Istem has completed calibration for SIPNET using a <a href="https://github.com/PecanProject/pecan/blob/develop/modules/assim.batch/R/pda.emulator.R">parameter data assimilation emulator</a> contained within the PEcAn workflow. LINKAGES will also be calibrated using this method. This method is also generalizable to other sites assuming there is data independent of data assimilation data available to calibrate against.</p>
</div>
<div id="initial-conditions" class="section level3">
<h3><span class="header-section-number">9.2.13</span> Initial Conditions</h3>
<p>The initial conditions for SIPNET are sampled across state space based on data distributions at the time when the data assimilation will begin. We do not sample LINAKGES for initial conditions and instead perform model spin up for 100 years prior to beginning data assimilation. In the future, we would like to estimate initial conditions based on data. We achieve adequate spread in the initial conditions by allowing the parameters to vary across ensemble members.</p>
</div>
<div id="drivers" class="section level3">
<h3><span class="header-section-number">9.2.14</span> Drivers</h3>
<p>We are currently using Global Climate Model (GCM) drivers from the PaLEON model intercomparison. Christy Rollinson and John Tipton are creating MET downscaled GCM drivers for the Paleon data assimilation sites. We will use these drivers when they are available because they are a closer representation of reality.</p>
</div>
</div>
<div id="sequential-state-data-assimilation" class="section level2">
<h2><span class="header-section-number">9.3</span> Sequential State Data Assimilation</h2>
<p>We are using sequential state data assimilation methods to assimilate paleon data products into ecosystem models because less computation power is required for sequential state data assimilation than for particle filter methods.</p>
<div id="general-description" class="section level3">
<h3><span class="header-section-number">9.3.1</span> General Description</h3>
<p>The general sequential data assimilation framework consists of three steps at each time step:
1. Read the state variable output for time t from the model forecast ensembles and save the forecast mean (muf) and covariance (Pf).
2. If there are data mean (y) and covariance (R) at this time step, perform data assimilation analysis (either EnKF or generalized ensemble filter) to calculate the new mean (mua) and covariance (Pa) of the state variables.
3. Use mua and Pa to restart and run the ecosystem model ensembles with new state variables for time t+1.</p>
</div>
<div id="enkf" class="section level3">
<h3><span class="header-section-number">9.3.2</span> EnKF</h3>
<p>There are two ways to implement sequential state data assimilation at this time. The first is the Ensemble Kalman Filter (EnKF). EnKF has an analytical solution, so the kalman gain, analysis mean vector, and analysis covariance matrix can be calculated directly:</p>
<pre><code>       
        K &lt;- Pf %*% t(H) %*% solve((R + H %*% Pf %*% t(H))) ## Kalman Gain
        
        mu.a &lt;- mu.f + K %*% (Y - H %*% mu.f) # Analysis mean vector
        
        Pa   &lt;- (diag(ncol(X)) - K %*% H) %*% Pf # Analysis covariance matrix
        </code></pre>
<p>The EnKF is typically used for sequential state data assimilation, but we found that EnKF lead to filter divergence when combined with our uncertain data products. Filter divergence led us to create a generalized ensemble filter that estimates process variance.</p>
</div>
<div id="generalized-ensemble-filter" class="section level3">
<h3><span class="header-section-number">9.3.3</span> Generalized Ensemble Filter</h3>
<p>The generalized ensemble filter follows generally the three steps of sequential state data assimilation. But, in the generalized ensemble filter we add a latent state vector that accounts for added process variance. Furthermore, instead of solving the analysis analytically like the EnKF, we have to estimate the mean analysis vector and covariance matrix with MCMC.</p>
<div id="mapping-ensemble-output-to-tobit-space" class="section level4">
<h4><span class="header-section-number">9.3.3.1</span> Mapping Ensemble Output to Tobit Space</h4>
<p>There are some instances when we have right or left censored variables from the model forecast. For example, a model estimating species level biomass may have several ensemble members that produce zero biomass for a given species. We are considering this case a left censored state variable that needs to be mapped to normal space using a tobit model. We do this by creating two matrices with dimensions number of ensembles by state variable. The first matrix is a matrix of indicator variables (y.ind), and the second is a matrix of censored variables (y.censored). When the indicator variable is 0 the state variable (j) for ensemble member (i) is sampled. This allows us to impute a normal distribution for each state variable that contains ‘missing’ forecasts or forecasts of zero.</p>
<pre><code>tobit2space.model &lt;- nimbleCode({
    for(i in 1:N){
      y.censored[i,1:J] ~ dmnorm(muf[1:J], cov = pf[1:J,1:J])
      for(j in 1:J){
        y.ind[i,j] ~ dconstraint(y.censored[i,j] &gt; 0)
      }
    }
    
    muf[1:J] ~ dmnorm(mean = mu_0[1:J], cov = pf[1:J,1:J])
    
    Sigma[1:J,1:J] &lt;- lambda_0[1:J,1:J]/nu_0
    pf[1:J,1:J] ~ dinvwish(S = Sigma[1:J,1:J], df = J)
    
  })</code></pre>
</div>
<div id="generalized-ensemble-filter-model-description" class="section level4">
<h4><span class="header-section-number">9.3.3.2</span> Generalized Ensemble Filter Model Description</h4>
<p>Below is the BUGS code for the full analysis model. The forecast mean an covariance are calculated from the tobit2space model above. We use a tobit likelihood in this model because there are instances when the data may be left or right censored. Process variance is included by adding a latent model state (X) with a process precision matrix (q). We update our prior on q at each time step using our estimate of q from the previous time step.</p>
<pre><code>  tobit.model &lt;- nimbleCode({ 
    
    q[1:N,1:N]  ~ dwish(R = aq[1:N,1:N], df = bq) ## aq and bq are estimated over time
    Q[1:N,1:N] &lt;- inverse(q[1:N,1:N])
    X.mod[1:N] ~ dmnorm(muf[1:N], prec = pf[1:N,1:N]) ## Model Forecast ##muf and pf are assigned from ensembles
    
    ## add process error
    X[1:N]  ~ dmnorm(X.mod[1:N], prec = q[1:N,1:N])
    
    #agb linear
    #y_star[1:YN,1:YN] &lt;- X[1:YN,1:YN] #[choose]
    
    #f.comp non linear
    #y_star[1:YN] &lt;- X[1:YN] / sum(X[1:YN])
    
    ## Analysis
    y.censored[1:YN] ~ dmnorm(X[1:YN], prec = r[1:YN,1:YN]) #is it an okay assumpution to just have X and Y in the same order?
    
    #don&#39;t flag y.censored as data, y.censored in inits
    #remove y.censored samplers and only assign univariate samplers on NAs
    
    for(i in 1:YN){
      y.ind[i] ~ dconstraint(y.censored[i] &gt; 0)
    }
    
  })</code></pre>
</div>
</div>
<div id="ensemble-adjustment" class="section level3">
<h3><span class="header-section-number">9.3.4</span> Ensemble Adjustment</h3>
<p>Each ensemble member has a different set of species parameters. We adjust the updated state variables by using an ensemble adjustment. The ensemble adjustment weights the ensemble members based on their likelihood during the analysis step.</p>
<pre><code>      S_f  &lt;- svd(Pf)
      L_f  &lt;- S_f$d
      V_f  &lt;- S_f$v
      
      ## normalize
      Z &lt;- X*0
      for(i in seq_len(nrow(X))){
          Z[i,] &lt;- 1/sqrt(L_f) * t(V_f)%*%(X[i,]-mu.f)
      }
      Z[is.na(Z)]&lt;-0
      
      ## analysis
      S_a  &lt;- svd(Pa)
      L_a  &lt;- S_a$d
      V_a  &lt;- S_a$v
      
      ## analysis ensemble
      X_a &lt;- X*0
      for(i in seq_len(nrow(X))){
        X_a[i,] &lt;- V_a %*%diag(sqrt(L_a))%*%Z[i,] + mu.a
      }</code></pre>
</div>
<div id="diagnostics" class="section level3">
<h3><span class="header-section-number">9.3.5</span> Diagnostics</h3>
<p>There are three diagnostics we have currently implemented: time series, bias time series, and process variance. The time series diagnostics show the data, forecast, and analysis time series for each state variable. These are useful for visually assessing variance and magnitude of change of state variables through time. These time series are also updated throughout the analysis and are also created as a pdf at the end of the SDA workflow. There are two types of bias time series the first assess the bias in the update (the forecast minus the analysis) and the second assess the bias in the error (the forecast minus the data). These bias time series are useful for identifying which state variables have intrinsic bias within the model. For example, if red oak biomass in LINKAGES increases at every time step (the update and the error are always positive), this would suggest that LINKAGES has a positive growth or recruitment bias for red oak. Finally, when using the generalized ensemble filter to estimate process variance, there are two additional plots to assess estimation of process variance. The first is a correlation plot of the process covariance matrix. This tells us what correlations are incorrectly represented by the model. For example, if red oak biomass and white pine biomass are highly negatively correlated in the process covariance matrix, this means that the model either 1) has no relationship between red oak and white pine and they should affect each other negatively or 2) there is a positive relationship between red oak and white pine and there shouldn’t be any relationship. We can determine which of these is true by comparing the process covariance matrix to the model covariance matrix. The second process variance diagnostic plot shows how the degrees of freedom associated with estimating the process covariance matrix have changed through time. This plot should show increasing degrees of freedom through time.</p>
<p>==&gt; 03_hidden_analyses/04_multisettings.Rmd &lt;==
## MultiSettings</p>
<p>(TODO: Under construction…)</p>
</div>
</div>
<div id="Benchmarking" class="section level2">
<h2><span class="header-section-number">9.4</span> Benchmarking</h2>
<p>Benchmarking is the process of comparing model outputs against either experimental data or against other model outputs as a way to validate model performance.
We have a suit of statistical comparisons that provide benchmarking scores as well as visual comparisons that help in diagnosing data-model and/or model-model differences.</p>
<div id="data-preparation" class="section level3">
<h3><span class="header-section-number">9.4.1</span> Data Preparation</h3>
<p>All data that you want to compare with model runs must be registered in the database.
This is currently a step that must be done by hand either from the command line or through the online BETY interface.
The data must have three records:</p>
<ol style="list-style-type: decimal">
<li><p>An input record (Instructions <a href="adding-to-pecan.html#NewInput">here</a>)</p></li>
<li><p>A database file record (Instructions <a href="adding-to-pecan.html#NewInput">here</a>)</p></li>
<li><p>A format record (Instructions <a href="adding-to-pecan.html#NewFormat">here</a>)</p></li>
</ol>
</div>
<div id="model-runs" class="section level3">
<h3><span class="header-section-number">9.4.2</span> Model Runs</h3>
<p>Model runs can be setup and executed
- Using the PEcAn web interface online or with a VM (<a href="GettingStarted.html#GettingStarted">see setup</a>)
- By hand using the <a href="pecanXML.html#pecanXML">pecan.xml</a></p>
</div>
<div id="the-benchmarking-shiny-app" class="section level3">
<h3><span class="header-section-number">9.4.3</span> The Benchmarking Shiny App</h3>
<p>The entire benchmarking process can be done through the Benchmarking R Shiny app.</p>
<p>When the model run has completed, navigate to the workflow visualization Shiny app.</p>
<ul>
<li>Load model data
<ul>
<li>Select the workflow and run id</li>
<li>Make sure that your model output is loading properly (i.e. you can see plots of your data)</li>
</ul></li>
<li>Load benchmarking data
<ul>
<li>Again make sure that you can see the uploaded data plotted alongside the model output. In the future there will be more tools for double checking that your uploaded data is appropriate for benchmarking, but for now you may need to do the sanity checks by hand.</li>
</ul></li>
</ul>
<div id="create-a-reference-run-record" class="section level4">
<h4><span class="header-section-number">9.4.3.1</span> Create a reference run record</h4>
<ul>
<li>Navigate to the Benchmarking tab
<ul>
<li>The first step is to register the new model run as a reference run in the database. Benchmarking cannot be done before this step is completed. When the reference run record has been created, additional menus for benchmarking will appear.</li>
</ul></li>
</ul>
</div>
<div id="setup-benchmarks-and-metrics" class="section level4">
<h4><span class="header-section-number">9.4.3.2</span> Setup Benchmarks and metrics</h4>
<ul>
<li>From the menus select
<ul>
<li>The variables in the uploaded data that you wish to compare with model output.</li>
<li>The numerical metrics you would like to use in your comparison.</li>
<li>Additional comparison plots that you would like to see.</li>
</ul></li>
<li>Note: All these selections populate the benchmarking section of the <code>pecan.BENCH.xml</code> which is then saved in the same location as the original run output. This xml is purely for reference.</li>
</ul>
<div id="benchmarking-output" class="section level5">
<h5><span class="header-section-number">9.4.3.2.1</span> Benchmarking Output</h5>
<ul>
<li>All benchmarking results are stored in the benchmarking directory which is created in the same folder as the original model run.</li>
<li>The benchmaking directory contains subdirectories for each of the datasets compared with the model output. The names of these directories are the same as the corresponding data set’s input id in BETY.</li>
<li>Each input directory contains <code>benchmarking.output.Rdata</code>, an Rdata file contianing all the results of the benchmarking workflow. <code>load(benchmarking.output.Rdata)</code> loads a list called <code>result.out</code> which contains the following:
<ul>
<li><code>bench.results</code>: a data frame of all numeric benchmarking scores</li>
<li><code>format</code>: a data frame that can be used to see how the input data was transformed to make it comparable to the model output. This involves converting from the original variable names and units to the internal pecan standard.</li>
<li><code>aligned.dat</code>: a data frame of the final aligned model and input values.</li>
</ul></li>
<li><p>All plots are saved as pdf files with names with “benchmark_plot-type_variable_input-id.pdf”</p></li>
<li><p>To view interactive results, naviage to the Benchmarking Plots tab in the shiny app.</p></li>
</ul>
</div>
</div>
</div>
<div id="benchmarking-in-pecan.xml" class="section level3">
<h3><span class="header-section-number">9.4.4</span> Benchmarking in pecan.xml</h3>
<p>Before reading this section, it is recommended that you <a href="pecanXML.html#pecanXML">familiarize yourself with basics of the pecan.xml file.</a></p>
<p>The <code>pecan.xml</code> has an <em>optional</em> benchmarking section. Below are all the tags in the benchmarking section explained. Many of these field are filled in automatically during the benchmarking process when using the benchmarking shiny app.</p>
<p>The only time one should edit the benchmarking section by hand is for performing clone runs. See <a href="#CloneRun">clone run documentation.</a></p>
<p><code>&lt;benchmarking&gt;</code> settings:</p>
<ul>
<li><code>ensemble_id</code>: the id of the ensemble that you will be using - the settings from this ensemble will be saved in a reference run record and then <code>ensemble_id</code> will be replaced with <code>reference_run_id</code></li>
<li><code>new_run</code>: TRUE = create new run, FALSE = use existing run (required, default FALSE)</li>
</ul>
<p>It is possible to look at more than one benchmark with a particular run.
The specific settings related to each benchmark are in a sub section called <code>benchmark</code></p>
<ul>
<li><code>input_id</code>: the id of the benchmarking data (required)</li>
<li><code>variable_id</code>: the id of the variable of interest within the data. If you leave this blank, all variables that are shared between the input and model output will be used.</li>
<li><code>metric_id</code>: the id(s) of the metric(s) to be calculated. If you leave this blank, all metrics will be used.</li>
</ul>
<p>Example:
In this example,
- we are using a pre-existing run from <code>ensemble_id = 1000010983</code> (<code>new_run = FALSE</code>)
- the output will be compared to data from <code>input_id = 1000013743</code>, specifically two variables of interest: <code>variable_id = 411, variable_id = 18</code>
- for <code>variable_id = 411</code> we will perform only one metric of comparison <code>metric_id = 1000000001</code>
- for for <code>variable_id = 18</code> we will perform two metrics of comparison <code>metric_id = 1000000001, metric_id = 1000000002</code></p>
<pre class="sourceCode xml"><code class="sourceCode xml"><span class="kw">&lt;benchmarking&gt;</span>
  <span class="kw">&lt;ensemble_id&gt;</span>1000010983<span class="kw">&lt;/ensemble_id&gt;</span>
  <span class="kw">&lt;new_run&gt;</span>FALSE<span class="kw">&lt;/new_run&gt;</span>
  <span class="kw">&lt;benchmark&gt;</span>
   <span class="kw">&lt;input_id&gt;</span>1000013743<span class="kw">&lt;/input_id&gt;</span>
   <span class="kw">&lt;variable_id&gt;</span>411<span class="kw">&lt;/variable_id&gt;</span>
   <span class="kw">&lt;site_id&gt;</span>853<span class="kw">&lt;/site_id&gt;</span>
   <span class="kw">&lt;metrics&gt;</span>
    <span class="kw">&lt;metric_id&gt;</span>1000000001<span class="kw">&lt;/metric_id&gt;</span>
   <span class="kw">&lt;/metrics&gt;</span>
  <span class="kw">&lt;/benchmark&gt;</span>
  <span class="kw">&lt;benchmark&gt;</span>
   <span class="kw">&lt;input_id&gt;</span>1000013743<span class="kw">&lt;/input_id&gt;</span>
   <span class="kw">&lt;variable_id&gt;</span>18<span class="kw">&lt;/variable_id&gt;</span>
   <span class="kw">&lt;site_id&gt;</span>853<span class="kw">&lt;/site_id&gt;</span>
   <span class="kw">&lt;metrics&gt;</span>
    <span class="kw">&lt;metric_id&gt;</span>1000000001<span class="kw">&lt;/metric_id&gt;</span>
    <span class="kw">&lt;metric_id&gt;</span>1000000002<span class="kw">&lt;/metric_id&gt;</span>
   <span class="kw">&lt;/metrics&gt;</span>
  <span class="kw">&lt;/benchmark&gt;</span>
<span class="kw">&lt;/benchmarking&gt;</span></code></pre>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="additional-web-configuration.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="pecan-remote.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/PecanProject/pecan/edit/master/book_source/03_intermediate_users_guide/03_hidden_analyses.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(src))
      src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
